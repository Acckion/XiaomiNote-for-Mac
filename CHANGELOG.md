# 更新日志

本文件记录项目的所有重要变更。格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)。

## [Unreleased]

## [3.4.0] - 2026-01-18

### 新增
- 智能内容变化检测：新增 XMLNormalizer 组件，实现基于语义的内容比较
- 时间戳精确控制：只有在实际编辑笔记时才更新时间戳
- 新增 27 个单元测试，覆盖各种 XML 格式场景

### 优化
- XML 规范化耗时 < 10ms，不影响用户体验
- 添加详细的性能监控日志
- 优化内容比较算法

## [3.3.0] - 2026-01-16

### 优化
- 统一操作队列架构重构，提升同步可靠性
- 优化笔记选择和时间戳处理逻辑
- 改进启动数据加载流程
- 完善视图状态同步机制
- 优化原生编辑器格式应用性能
- 改进中文输入法兼容性
- 完善附件选择机制
- 优化列表格式处理
- 优化笔记列表排序和显示
- 改进工具栏可见性管理
- 完善格式菜单状态同步

## [3.0.0] - 2026-01-01

### 新增
- 原生富文本编辑器（NSTextView），替代 Web 编辑器作为默认编辑器
- 完整的格式状态同步机制
- 图片和语音附件支持
- 复选框同步功能
- 语音录制功能
- 语音上传到云端
- 语音播放器
- 画廊视图模式
- 笔记列表排序和日期分组
- 笔记列表移动动画
- 完整的显示菜单（视图模式、缩放、工具栏控制）
- 启动序列管理器

### 修复
- 语音格式兼容性问题

### 优化
- Cookie 自动刷新机制
- 视图状态同步
- 视图状态持久化

## [2.3.0-beta] - 2025-12-15

### 新增
- 原生笔记编辑器（实验性）

## [2.2.0] - 2025-12-01

### 新增
- 轻量化同步功能
- 在线状态管理和 Cookie 自动刷新
- 查找和替换功能

## [2.1.0] - 2025-11-15

### 优化
- 颜色主题系统
- 项目结构和构建配置

## [2.0.0] - 2025-11-01

### 新增
- AppKit+SwiftUI 混合架构
- 完整的 macOS 菜单系统
- 多窗口管理

## [1.2.0] - 2025-10-15

### 新增
- 内存缓存管理器
- 保存队列管理器

### 优化
- 笔记切换性能

## [1.1.0] - 2025-10-01

### 变更
- 从纯 SwiftUI 迁移到 AppKit+SwiftUI 混合架构

### 新增
- 离线操作队列

## [1.0.0] - 2025-09-15

### 新增
- 初始版本
- 基本的笔记编辑和同步功能
