 ---                                                                    
  MiNote macOS æ¶æ„é‡æ„æŒ‡å¯¼æ–‡æ¡£                                          
                                                                         
  æ–‡æ¡£æ¦‚è¿°                                                               
                                                                         
  æœ¬æ–‡æ¡£ä¸º MiNote macOS é¡¹ç›®æä¾›ç³»ç»Ÿæ€§çš„æ¶æ„é‡æ„æ–¹æ¡ˆï¼Œæ—¨åœ¨è§£å†³å½“å‰æ¶æ„ä¸­ 
  çš„å…³é”®é—®é¢˜ï¼Œä¸ºæœªæ¥çš„å¤§è§„æ¨¡å¼€å‘å¥ å®šåŸºç¡€ã€‚                               
                                                                         
  é¢„è®¡æ€»å·¥ä½œé‡ï¼š 4-6 ä¸ªæœˆï¼ˆ2-3 åå¼€å‘è€…ï¼‰                                
                                                                         
  æœ€åæ›´æ–°ï¼š 2026-01-22                                                  
                                                                         
  ---                                                                    
  ç›®å½•                                                                   
                                                                         
  1. #1-å½“å‰æ¶æ„é—®é¢˜æ€»ç»“                                                 
  2. #2-é‡æ„æ€»ä½“ç­–ç•¥                                                     
  3. #3-é˜¶æ®µ-1å»ºç«‹åŸºç¡€è®¾æ–½2-3-å‘¨                                         
  4. #4-é˜¶æ®µ-2æ‹†åˆ†æ ¸å¿ƒç»„ä»¶4-6-å‘¨                                         
  5. #5-é˜¶æ®µ-3é‡æ„æœåŠ¡å±‚3-4-å‘¨                                           
  6. #6-é˜¶æ®µ-4æ€§èƒ½ä¼˜åŒ–2-3-å‘¨                                             
  7. #7-é£é™©ç®¡ç†ä¸å›æ»šç­–ç•¥                                               
  8. #8-æˆåŠŸæŒ‡æ ‡                                                         
                                                                         
  ---                                                                    
  1. å½“å‰æ¶æ„é—®é¢˜æ€»ç»“                                                    
                                                                         
  1.1 å…³é”®é—®é¢˜                                                           
  é—®é¢˜: NotesViewModel ä¸Šå¸å¯¹è±¡ï¼ˆ4,530 è¡Œï¼‰                              
  ä¸¥é‡ç¨‹åº¦: ğŸ”´ å…³é”®                                                      
  å½±å“: æ— æ³•å¹¶è¡Œå¼€å‘ã€æµ‹è¯•å›°éš¾ã€æ€§èƒ½é—®é¢˜                                 
  ä½ç½®: Sources/ViewModel/NotesViewModel.swift                           
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               
  é—®é¢˜: å•ä¾‹æ¨¡å¼æ»¥ç”¨ï¼ˆ45+ ä¸ªï¼‰                                           
  ä¸¥é‡ç¨‹åº¦: ğŸ”´ å…³é”®                                                      
  å½±å“: æ— æ³•æµ‹è¯•ã€éšè—ä¾èµ–ã€å†…å­˜æ³„æ¼                                     
  ä½ç½®: å…¨å±€                                                             
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               
  é—®é¢˜: çŠ¶æ€ç®¡ç†ç¢ç‰‡åŒ–ï¼ˆ9+ ä¸ªç®¡ç†å™¨ï¼‰                                    
  ä¸¥é‡ç¨‹åº¦: ğŸ”´ å…³é”®                                                      
  å½±å“: çŠ¶æ€ä¸ä¸€è‡´ã€åŒæ­¥ bugã€éš¾ä»¥è°ƒè¯•                                   
  ä½ç½®: å…¨å±€                                                             
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               
  é—®é¢˜: ç¼ºä¹åè®®æŠ½è±¡                                                     
  ä¸¥é‡ç¨‹åº¦: ğŸŸ¡ é«˜                                                        
  å½±å“: ç´§è€¦åˆã€æ— æ³• mock                                                
  ä½ç½®: Service å±‚                                                       
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               
  é—®é¢˜: å¤§å‹æœåŠ¡æ–‡ä»¶ï¼ˆ3,000+ è¡Œï¼‰                                        
  ä¸¥é‡ç¨‹åº¦: ğŸŸ¡ é«˜                                                        
  å½±å“: éš¾ä»¥ç»´æŠ¤ã€èŒè´£ä¸æ¸…                                               
  ä½ç½®: Service å±‚                                                       
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               
  é—®é¢˜: å¾ªç¯ä¾èµ–                                                         
  ä¸¥é‡ç¨‹åº¦: ğŸŸ¢ ä¸­                                                        
  å½±å“: å†…å­˜ç®¡ç†å¤æ‚ã€æ•°æ®æµæ··ä¹±                                         
  ä½ç½®: ViewModel â†” Coordinator                                          
  1.2 å¦‚æœä¸é‡æ„çš„åæœ                                                   
                                                                         
  - 6 ä¸ªæœˆå†…ï¼š å¼€å‘é€Ÿåº¦é™ä½ 50%ï¼Œå›¢é˜Ÿæ‰©å±•å¤±è´¥                            
  - 12 ä¸ªæœˆå†…ï¼š ä»£ç åº“å˜å¾—æ— æ³•ç»´æŠ¤ï¼ŒæŠ€æœ¯å€ºåŠ¡å¤±æ§                         
  - 18 ä¸ªæœˆå†…ï¼š å¯èƒ½éœ€è¦å®Œå…¨é‡å†™                                         
                                                                         
  ---                                                                    
  2. é‡æ„æ€»ä½“ç­–ç•¥                                                        
                                                                         
  2.1 æ ¸å¿ƒåŸåˆ™                                                           
                                                                         
  1. æ¸è¿›å¼é‡æ„ - ä¸åœæ­¢æ–°åŠŸèƒ½å¼€å‘ï¼Œé€æ­¥æ”¹è¿›                             
  2. æµ‹è¯•å…ˆè¡Œ - æ¯æ¬¡é‡æ„å‰åéƒ½æœ‰æµ‹è¯•ä¿æŠ¤                                 
  3. å‘åå…¼å®¹ - æ–°æ—§ä»£ç å…±å­˜ï¼Œé€æ­¥è¿ç§»                                   
  4. é£é™©å¯æ§ - æ¯ä¸ªé˜¶æ®µéƒ½å¯ä»¥å›æ»š                                       
                                                                         
  2.2 é‡æ„è·¯çº¿å›¾                                                         
                                                                         
  é˜¶æ®µ 1: åŸºç¡€è®¾æ–½ (2-3 å‘¨)                                              
      â†“                                                                  
  é˜¶æ®µ 2: æ‹†åˆ†æ ¸å¿ƒ (4-6 å‘¨)                                              
      â†“                                                                  
  é˜¶æ®µ 3: æœåŠ¡å±‚é‡æ„ (3-4 å‘¨)                                            
      â†“                                                                  
  é˜¶æ®µ 4: æ€§èƒ½ä¼˜åŒ– (2-3 å‘¨)                                              
                                                                         
  2.3 å¹¶è¡Œå¼€å‘ç­–ç•¥                                                       
                                                                         
  - æ–°åŠŸèƒ½å¼€å‘ï¼š ä½¿ç”¨æ–°æ¶æ„æ¨¡å¼                                          
  - Bug ä¿®å¤ï¼š åœ¨æ—§ä»£ç ä¸­ä¿®å¤ï¼Œä½†è®°å½•æŠ€æœ¯å€ºåŠ¡                            
  - é‡æ„å·¥ä½œï¼š ç‹¬ç«‹åˆ†æ”¯ï¼Œé¢‘ç¹åˆå¹¶                                        
                                                                         
  ---                                                                    
  3. é˜¶æ®µ 1ï¼šå»ºç«‹åŸºç¡€è®¾æ–½ï¼ˆ2-3 å‘¨ï¼‰                                      
                                                                         
  3.1 ç›®æ ‡                                                               
                                                                         
  - å»ºç«‹ä¾èµ–æ³¨å…¥æ¡†æ¶                                                     
  - åˆ›å»ºæœåŠ¡åè®®æŠ½è±¡                                                     
  - æ­å»ºæµ‹è¯•åŸºç¡€è®¾æ–½                                                     
  - å»ºç«‹æ–°çš„ä»£ç è§„èŒƒ                                                     
                                                                         
  3.2 æ­¥éª¤ 1.1ï¼šåˆ›å»ºä¾èµ–æ³¨å…¥å®¹å™¨ï¼ˆ3 å¤©ï¼‰                                 
                                                                         
  åˆ›å»º DI å®¹å™¨                                                           
                                                                         
  æ–‡ä»¶ï¼š Sources/Core/DependencyInjection/DIContainer.swift              
                                                                         
  /// ä¾èµ–æ³¨å…¥å®¹å™¨                                                       
  final class DIContainer {                                              
      static let shared = DIContainer()                                  
                                                                         
      private var services: [String: Any] = [:]                          
      private var factories: [String: () -> Any] = [:]                   
                                                                         
      private init() {}                                                  
                                                                         
      /// æ³¨å†Œå•ä¾‹æœåŠ¡                                                   
      func register<T>(_ type: T.Type, instance: T) {                    
          let key = String(describing: type)                             
          services[key] = instance                                       
      }                                                                  
                                                                         
      /// æ³¨å†Œå·¥å‚æ–¹æ³•                                                   
      func register<T>(_ type: T.Type, factory: @escaping () -> T) {     
          let key = String(describing: type)                             
          factories[key] = factory                                       
      }                                                                  
                                                                         
      /// è§£ææœåŠ¡                                                       
      func resolve<T>(_ type: T.Type) -> T {                             
          let key = String(describing: type)                             
                                                                         
          // å…ˆæŸ¥æ‰¾å·²æ³¨å†Œçš„å®ä¾‹                                          
          if let service = services[key] as? T {                         
              return service                                             
          }                                                              
                                                                         
          // å†æŸ¥æ‰¾å·¥å‚æ–¹æ³•                                              
          if let factory = factories[key] {                              
              let instance = factory() as! T                             
              return instance                                            
          }                                                              
                                                                         
          fatalError("Service \(key) not registered")                    
      }                                                                  
  }                                                                      
                                                                         
  åˆ›å»ºæœåŠ¡å®šä½å™¨ï¼ˆå¯é€‰ï¼Œç”¨äºè¿‡æ¸¡æœŸï¼‰                                     
                                                                         
  æ–‡ä»¶ï¼š Sources/Core/DependencyInjection/ServiceLocator.swift           
                                                                         
  /// æœåŠ¡å®šä½å™¨ï¼ˆè¿‡æ¸¡æœŸä½¿ç”¨ï¼Œæœ€ç»ˆåº”è¯¥ç§»é™¤ï¼‰                             
  final class ServiceLocator {                                           
      static let shared = ServiceLocator()                               
      private let container = DIContainer.shared                         
                                                                         
      private init() {}                                                  
                                                                         
      /// é…ç½®æ‰€æœ‰æœåŠ¡                                                   
      func configure() {                                                 
          // æ³¨å†ŒæœåŠ¡ï¼ˆåç»­ä¼šé€æ­¥æ·»åŠ ï¼‰                                  
      }                                                                  
  }                                                                      
                                                                         
  3.3 æ­¥éª¤ 1.2ï¼šåˆ›å»ºæœåŠ¡åè®®ï¼ˆ5 å¤©ï¼‰                                     
                                                                         
  ä¸ºæ¯ä¸ªä¸»è¦æœåŠ¡åˆ›å»ºåè®®æŠ½è±¡ã€‚                                           
                                                                         
  ç¤ºä¾‹ï¼šç½‘ç»œæœåŠ¡åè®®                                                     
                                                                         
  æ–‡ä»¶ï¼š Sources/Service/Network/Protocols/NoteServiceProtocol.swift     
                                                                         
  import Foundation                                                      
                                                                         
  /// ç¬”è®°ç½‘ç»œæœåŠ¡åè®®                                                   
  protocol NoteServiceProtocol {                                         
      // MARK: - ç¬”è®°æ“ä½œ                                                
      func fetchNotes() async throws -> [Note]                           
      func fetchNote(id: String) async throws -> Note                    
      func createNote(_ note: Note) async throws -> Note                 
      func updateNote(_ note: Note) async throws -> Note                 
      func deleteNote(id: String) async throws                           
                                                                         
      // MARK: - åŒæ­¥æ“ä½œ                                                
      func syncNotes(since: Date?) async throws -> SyncResult            
      func uploadChanges(_ changes: [NoteChange]) async throws           
  }                                                                      
                                                                         
  /// åŒæ­¥ç»“æœ                                                           
  struct SyncResult {                                                    
      let notes: [Note]                                                  
      let deletedIds: [String]                                           
      let lastSyncTime: Date                                             
  }                                                                      
                                                                         
  ç¤ºä¾‹ï¼šå­˜å‚¨æœåŠ¡åè®®                                                     
                                                                         
  æ–‡ä»¶ï¼š Sources/Service/Storage/Protocols/NoteStorageProtocol.swift     
                                                                         
  import Foundation                                                      
                                                                         
  /// ç¬”è®°å­˜å‚¨æœåŠ¡åè®®                                                   
  protocol NoteStorageProtocol {                                         
      // MARK: - è¯»å–æ“ä½œ                                                
      func fetchAllNotes() throws -> [Note]                              
      func fetchNote(id: String) throws -> Note?                         
      func fetchNotes(in folderId: String) throws -> [Note]              
      func searchNotes(query: String) throws -> [Note]                   
                                                                         
      // MARK: - å†™å…¥æ“ä½œ                                                
      func saveNote(_ note: Note) throws                                 
      func saveNotes(_ notes: [Note]) throws                             
      func deleteNote(id: String) throws                                 
      func deleteNotes(ids: [String]) throws                             
                                                                         
      // MARK: - æ‰¹é‡æ“ä½œ                                                
      func performBatchUpdate(_ block: () throws -> Void) throws         
  }                                                                      
                                                                         
  ç¤ºä¾‹ï¼šåŒæ­¥æœåŠ¡åè®®                                                     
                                                                         
  æ–‡ä»¶ï¼š Sources/Service/Sync/Protocols/SyncServiceProtocol.swift        
                                                                         
  import Foundation                                                      
  import Combine                                                         
                                                                         
  /// åŒæ­¥æœåŠ¡åè®®                                                       
  protocol SyncServiceProtocol {                                         
      // MARK: - åŒæ­¥çŠ¶æ€                                                
      var isSyncing: AnyPublisher<Bool, Never> { get }                   
      var lastSyncTime: Date? { get }                                    
                                                                         
      // MARK: - åŒæ­¥æ“ä½œ                                                
      func startSync() async throws                                      
      func stopSync()                                                    
      func syncNote(id: String) async throws                             
                                                                         
      // MARK: - ç¦»çº¿é˜Ÿåˆ—                                                
      func queueOperation(_ operation: SyncOperation) throws             
      func processPendingOperations() async throws                       
  }                                                                      
                                                                         
  /// åŒæ­¥æ“ä½œ                                                           
  struct SyncOperation: Codable {                                        
      let id: String                                                     
      let type: OperationType                                            
      let noteId: String                                                 
      let timestamp: Date                                                
                                                                         
      enum OperationType: String, Codable {                              
          case create, update, delete                                    
      }                                                                  
  }                                                                      
                                                                         
  éœ€è¦åˆ›å»ºçš„å…¶ä»–åè®®                                                     
                                                                         
  åˆ›å»ºä»¥ä¸‹åè®®æ–‡ä»¶ï¼š                                                     
                                                                         
  1. AuthenticationServiceProtocol.swift - è®¤è¯æœåŠ¡                      
  2. NetworkMonitorProtocol.swift - ç½‘ç»œç›‘æ§                             
  3. ImageServiceProtocol.swift - å›¾ç‰‡æœåŠ¡                               
  4. AudioServiceProtocol.swift - éŸ³é¢‘æœåŠ¡                               
  5. CacheServiceProtocol.swift - ç¼“å­˜æœåŠ¡                               
                                                                         
  3.4 æ­¥éª¤ 1.3ï¼šæ­å»ºæµ‹è¯•åŸºç¡€è®¾æ–½ï¼ˆ4 å¤©ï¼‰                                 
                                                                         
  åˆ›å»ºæµ‹è¯•åŸºç±»                                                           
                                                                         
  æ–‡ä»¶ï¼š Tests/TestSupport/BaseTestCase.swift                            
                                                                         
  import XCTest                                                          
  @testable import MiNoteMac                                             
                                                                         
  class BaseTestCase: XCTestCase {                                       
      var container: DIContainer!                                        
                                                                         
      override func setUp() {                                            
          super.setUp()                                                  
          container = DIContainer()                                      
          configureMockServices()                                        
      }                                                                  
                                                                         
      override func tearDown() {                                         
          container = nil                                                
          super.tearDown()                                               
      }                                                                  
                                                                         
      /// é…ç½® Mock æœåŠ¡                                                 
      func configureMockServices() {                                     
          // å­ç±»é‡å†™æ­¤æ–¹æ³•æ¥æ³¨å†Œ mock æœåŠ¡                              
      }                                                                  
  }                                                                      
                                                                         
  åˆ›å»º Mock æœåŠ¡                                                         
                                                                         
  æ–‡ä»¶ï¼š Tests/Mocks/MockNoteService.swift                               
                                                                         
  import Foundation                                                      
  @testable import MiNoteMac                                             
                                                                         
  class MockNoteService: NoteServiceProtocol {                           
      // MARK: - Mock æ•°æ®                                               
      var mockNotes: [Note] = []                                         
      var mockError: Error?                                              
      var fetchNotesCallCount = 0                                        
                                                                         
      // MARK: - NoteServiceProtocol                                     
      func fetchNotes() async throws -> [Note] {                         
          fetchNotesCallCount += 1                                       
                                                                         
          if let error = mockError {                                     
              throw error                                                
          }                                                              
                                                                         
          return mockNotes                                               
      }                                                                  
                                                                         
      func fetchNote(id: String) async throws -> Note {                  
          if let error = mockError {                                     
              throw error                                                
          }                                                              
                                                                         
          guard let note = mockNotes.first(where: { $0.id == id }) else {
              throw NSError(domain: "MockError", code: 404)              
          }                                                              
                                                                         
          return note                                                    
      }                                                                  
                                                                         
      func createNote(_ note: Note) async throws -> Note {               
          if let error = mockError {                                     
              throw error                                                
          }                                                              
                                                                         
          mockNotes.append(note)                                         
          return note                                                    
      }                                                                  
                                                                         
      func updateNote(_ note: Note) async throws -> Note {               
          if let error = mockError {                                     
              throw error                                                
          }                                                              
                                                                         
          if let index = mockNotes.firstIndex(where: { $0.id == note.id  
  }) {                                                                   
              mockNotes[index] = note                                    
          }                                                              
                                                                         
          return note                                                    
      }                                                                  
                                                                         
      func deleteNote(id: String) async throws {                         
          if let error = mockError {                                     
              throw error                                                
          }                                                              
                                                                         
          mockNotes.removeAll { $0.id == id }                            
      }                                                                  
                                                                         
      func syncNotes(since: Date?) async throws -> SyncResult {          
          if let error = mockError {                                     
              throw error                                                
          }                                                              
                                                                         
          return SyncResult(                                             
              notes: mockNotes,                                          
              deletedIds: [],                                            
              lastSyncTime: Date()                                       
          )                                                              
      }                                                                  
                                                                         
      func uploadChanges(_ changes: [NoteChange]) async throws {         
          if let error = mockError {                                     
              throw error                                                
          }                                                              
      }                                                                  
  }                                                                      
                                                                         
  åˆ›å»ºå…¶ä»– Mock æœåŠ¡                                                     
                                                                         
  åˆ›å»ºä»¥ä¸‹ Mock æ–‡ä»¶ï¼š                                                   
                                                                         
  1. MockNoteStorage.swift                                               
  2. MockSyncService.swift                                               
  3. MockAuthenticationService.swift                                     
  4. MockNetworkMonitor.swift                                            
                                                                         
  3.5 æ­¥éª¤ 1.4ï¼šå»ºç«‹ä»£ç è§„èŒƒï¼ˆ2 å¤©ï¼‰                                     
                                                                         
  åˆ›å»ºæ¶æ„æ–‡æ¡£                                                           
                                                                         
  æ–‡ä»¶ï¼š Docs/Architecture.md                                            
                                                                         
  # MiNote macOS æ¶æ„è§„èŒƒ                                                
                                                                         
  ## æ¶æ„åŸåˆ™                                                            
                                                                         
  1. **ä¾èµ–æ³¨å…¥ä¼˜å…ˆ** - ç¦æ­¢åˆ›å»ºæ–°çš„å•ä¾‹                                 
  2. **åè®®æŠ½è±¡** - æ‰€æœ‰æœåŠ¡å¿…é¡»æœ‰åè®®æ¥å£                               
  3. **å•ä¸€èŒè´£** - æ¯ä¸ªç±»ä¸è¶…è¿‡ 500 è¡Œ                                  
  4. **æµ‹è¯•è¦†ç›–** - æ–°ä»£ç å¿…é¡»æœ‰å•å…ƒæµ‹è¯•                                 
                                                                         
  ## ç›®å½•ç»“æ„                                                            
                                                                         
  Sources/                                                               
  â”œâ”€â”€ Core/               # æ ¸å¿ƒåŸºç¡€è®¾æ–½                                 
  â”‚   â”œâ”€â”€ DependencyInjection/                                           
  â”‚   â””â”€â”€ Extensions/                                                    
  â”œâ”€â”€ Domain/             # é¢†åŸŸæ¨¡å‹ï¼ˆæ–°å¢ï¼‰                             
  â”‚   â”œâ”€â”€ Models/                                                        
  â”‚   â”œâ”€â”€ UseCases/                                                      
  â”‚   â””â”€â”€ Repositories/                                                  
  â”œâ”€â”€ Service/            # æœåŠ¡å±‚                                       
  â”‚   â”œâ”€â”€ Network/                                                       
  â”‚   â”œâ”€â”€ Storage/                                                       
  â”‚   â””â”€â”€ Sync/                                                          
  â”œâ”€â”€ Presentation/       # è¡¨ç°å±‚ï¼ˆæ–°å¢ï¼‰                               
  â”‚   â”œâ”€â”€ ViewModels/                                                    
  â”‚   â””â”€â”€ Views/                                                         
  â””â”€â”€ App/                # åº”ç”¨å…¥å£                                     
                                                                         
  ## å‘½åè§„èŒƒ                                                            
                                                                         
  - **åè®®ï¼š** `XxxProtocol` æˆ– `XxxServiceProtocol`                     
  - **å®ç°ï¼š** `DefaultXxx` æˆ– `XxxImpl`                                 
  - **Mockï¼š** `MockXxx`                                                 
  - **ViewModelï¼š** `XxxViewModel`                                       
  - **UseCaseï¼š** `XxxUseCase`                                           
                                                                         
  ## ä»£ç å®¡æŸ¥æ¸…å•                                                        
                                                                         
  - [ ] æ˜¯å¦ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Ÿ                                               
  - [ ] æ˜¯å¦æœ‰åè®®æŠ½è±¡ï¼Ÿ                                                 
  - [ ] æ˜¯å¦æœ‰å•å…ƒæµ‹è¯•ï¼Ÿ                                                 
  - [ ] æ–‡ä»¶æ˜¯å¦å°äº 500 è¡Œï¼Ÿ                                            
  - [ ] æ˜¯å¦éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Ÿ                                           
                                                                         
  3.6 é˜¶æ®µ 1 éªŒæ”¶æ ‡å‡†                                                    
                                                                         
  - DIContainer åˆ›å»ºå®Œæˆå¹¶æœ‰æµ‹è¯•                                         
  - è‡³å°‘ 5 ä¸ªæ ¸å¿ƒæœåŠ¡åè®®åˆ›å»ºå®Œæˆ                                        
  - æµ‹è¯•åŸºç¡€è®¾æ–½æ­å»ºå®Œæˆ                                                 
  - è‡³å°‘ 3 ä¸ª Mock æœåŠ¡åˆ›å»ºå®Œæˆ                                          
  - æ¶æ„æ–‡æ¡£ç¼–å†™å®Œæˆ                                                     
  - å›¢é˜Ÿæˆå‘˜ç†è§£æ–°æ¶æ„æ¨¡å¼                                               
                                                                         
  ---                                                                    
  4. é˜¶æ®µ 2ï¼šæ‹†åˆ†æ ¸å¿ƒç»„ä»¶ï¼ˆ4-6 å‘¨ï¼‰                                      
                                                                         
  4.1 ç›®æ ‡                                                               
                                                                         
  - å°† NotesViewModelï¼ˆ4,530 è¡Œï¼‰æ‹†åˆ†ä¸ºå¤šä¸ªä¸“æ³¨çš„ ViewModel              
  - å®ç°ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†                                                   
  - å»ºç«‹æ¸…æ™°çš„æ•°æ®æµ                                                     
                                                                         
  4.2 æ­¥éª¤ 2.1ï¼šåˆ†æ NotesViewModel èŒè´£ï¼ˆ2 å¤©ï¼‰                         
                                                                         
  èŒè´£åˆ†æ                                                               
                                                                         
  å½“å‰ NotesViewModel çš„èŒè´£ï¼š                                           
                                                                         
  1. ç¬”è®°åˆ—è¡¨ç®¡ç† - æ˜¾ç¤ºã€è¿‡æ»¤ã€æ’åº                                     
  2. ç¬”è®°ç¼–è¾‘ - å†…å®¹ç¼–è¾‘ã€æ ¼å¼åŒ–                                         
  3. åŒæ­¥åè°ƒ - è§¦å‘åŒæ­¥ã€å¤„ç†å†²çª                                       
  4. è®¤è¯çŠ¶æ€ - ç™»å½•ã€ç™»å‡º                                               
  5. æœç´¢åŠŸèƒ½ - æœç´¢ç¬”è®°                                                 
  6. æ–‡ä»¶å¤¹ç®¡ç† - åˆ›å»ºã€åˆ é™¤æ–‡ä»¶å¤¹                                       
  7. éŸ³é¢‘é¢æ¿ - å½•éŸ³ã€æ’­æ”¾                                               
  8. ç½‘ç»œç›‘æ§ - åœ¨çº¿/ç¦»çº¿çŠ¶æ€                                            
  9. é”™è¯¯å¤„ç† - æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯                                             
  10. UI çŠ¶æ€ - é€‰æ‹©ã€åŠ è½½çŠ¶æ€                                           
                                                                         
  æ‹†åˆ†æ–¹æ¡ˆ                                                               
                                                                         
  NotesViewModel (4,530 è¡Œ)                                              
      â†“ æ‹†åˆ†ä¸º                                                           
  â”œâ”€â”€ NoteListViewModel (300-400 è¡Œ)      - åˆ—è¡¨å±•ç¤ºã€è¿‡æ»¤ã€æ’åº         
  â”œâ”€â”€ NoteEditorViewModel (400-500 è¡Œ)    - ç¼–è¾‘åŠŸèƒ½                     
  â”œâ”€â”€ SyncCoordinator (300-400 è¡Œ)        - åŒæ­¥åè°ƒ                     
  â”œâ”€â”€ AuthenticationViewModel (200-300 è¡Œ) - è®¤è¯çŠ¶æ€                    
  â”œâ”€â”€ SearchViewModel (200-300 è¡Œ)        - æœç´¢åŠŸèƒ½                     
  â”œâ”€â”€ FolderViewModel (200-300 è¡Œ)        - æ–‡ä»¶å¤¹ç®¡ç†                   
  â””â”€â”€ AudioPanelViewModel (200-300 è¡Œ)    - éŸ³é¢‘åŠŸèƒ½                     
                                                                         
  4.3 æ­¥éª¤ 2.2ï¼šåˆ›å»ºæ–°çš„ ViewModel åŸºç±»ï¼ˆ3 å¤©ï¼‰                          
                                                                         
  åˆ›å»º BaseViewModel                                                     
                                                                         
  æ–‡ä»¶ï¼š Sources/Presentation/ViewModels/Base/BaseViewModel.swift        
                                                                         
  import Foundation                                                      
  import Combine                                                         
                                                                         
  /// ViewModel åŸºç±»                                                     
  @MainActor                                                             
  class BaseViewModel: ObservableObject {                                
      // MARK: - Properties                                              
      private var cancellables = Set<AnyCancellable>()                   
                                                                         
      // MARK: - Lifecycle                                               
      init() {                                                           
          setupBindings()                                                
      }                                                                  
                                                                         
      deinit {                                                           
          cancellables.removeAll()                                       
      }                                                                  
                                                                         
      // MARK: - Setup                                                   
      /// å­ç±»é‡å†™æ­¤æ–¹æ³•æ¥è®¾ç½®ç»‘å®š                                       
      func setupBindings() {                                             
          // å­ç±»å®ç°                                                    
      }                                                                  
                                                                         
      // MARK: - Helpers                                                 
      func addCancellable(_ cancellable: AnyCancellable) {               
          cancellables.insert(cancellable)                               
      }                                                                  
  }                                                                      
                                                                         
  åˆ›å»º LoadableViewModel                                                 
                                                                         
  æ–‡ä»¶ï¼š Sources/Presentation/ViewModels/Base/LoadableViewModel.swift    
                                                                         
  import Foundation                                                      
                                                                         
  /// æ”¯æŒåŠ è½½çŠ¶æ€çš„ ViewModel                                           
  @MainActor                                                             
  class LoadableViewModel: BaseViewModel {                               
      // MARK: - Loading State                                           
      @Published var isLoading = false                                   
      @Published var error: Error?                                       
                                                                         
      // MARK: - Helpers                                                 
      func withLoading<T>(_ operation: () async throws -> T) async       
  rethrows -> T {                                                        
          isLoading = true                                               
          error = nil                                                    
                                                                         
          defer {                                                        
              isLoading = false                                          
          }                                                              
                                                                         
          do {                                                           
              return try await operation()                               
          } catch {                                                      
              self.error = error                                         
              throw error                                                
          }                                                              
      }                                                                  
  }                                                                      
                                                                         
  4.4 æ­¥éª¤ 2.3ï¼šåˆ›å»º NoteListViewModelï¼ˆ5 å¤©ï¼‰                           
                                                                         
  æ–‡ä»¶ï¼š Sources/Presentation/ViewModels/NoteList/NoteListViewModel.swift
                                                                         
  import Foundation                                                      
  import Combine                                                         
                                                                         
  /// ç¬”è®°åˆ—è¡¨ ViewModel                                                 
  @MainActor                                                             
  final class NoteListViewModel: LoadableViewModel {                     
      // MARK: - Dependencies                                            
      private let noteStorage: NoteStorageProtocol                       
      private let syncService: SyncServiceProtocol                       
                                                                         
      // MARK: - Published Properties                                    
      @Published var notes: [Note] = []                                  
      @Published var selectedNoteId: String?                             
      @Published var sortOption: SortOption = .editDate                  
      @Published var filterOption: FilterOption = .all                   
                                                                         
      // MARK: - Computed Properties                                     
      var filteredAndSortedNotes: [Note] {                               
          let filtered = filterNotes(notes, by: filterOption)            
          return sortNotes(filtered, by: sortOption)                     
      }                                                                  
                                                                         
      var selectedNote: Note? {                                          
          guard let id = selectedNoteId else { return nil }              
          return notes.first { $0.id == id }                             
      }                                                                  
                                                                         
      // MARK: - Initialization                                          
      init(                                                              
          noteStorage: NoteStorageProtocol,                              
          syncService: SyncServiceProtocol                               
      ) {                                                                
          self.noteStorage = noteStorage                                 
          self.syncService = syncService                                 
          super.init()                                                   
      }                                                                  
                                                                         
      // MARK: - Setup                                                   
      override func setupBindings() {                                    
          // ç›‘å¬åŒæ­¥å®Œæˆäº‹ä»¶                                            
          syncService.isSyncing                                          
              .sink { [weak self] isSyncing in                           
                  if !isSyncing {                                        
                      Task { await self?.loadNotes() }                   
                  }                                                      
              }                                                          
              .store(in: &cancellables)                                  
      }                                                                  
                                                                         
      // MARK: - Public Methods                                          
      func loadNotes() async {                                           
          await withLoading {                                            
              let loadedNotes = try noteStorage.fetchAllNotes()          
              self.notes = loadedNotes                                   
          }                                                              
      }                                                                  
                                                                         
      func selectNote(_ note: Note) {                                    
          selectedNoteId = note.id                                       
      }                                                                  
                                                                         
      func deselectNote() {                                              
          selectedNoteId = nil                                           
      }                                                                  
                                                                         
      func deleteNote(_ note: Note) async {                              
          await withLoading {                                            
              try noteStorage.deleteNote(id: note.id)                    
              notes.removeAll { $0.id == note.id }                       
                                                                         
              if selectedNoteId == note.id {                             
                  selectedNoteId = nil                                   
              }                                                          
          }                                                              
      }                                                                  
                                                                         
      func changeSortOption(_ option: SortOption) {                      
          sortOption = option                                            
      }                                                                  
                                                                         
      func changeFilterOption(_ option: FilterOption) {                  
          filterOption = option                                          
      }                                                                  
                                                                         
      // MARK: - Private Methods                                         
      private func filterNotes(_ notes: [Note], by filter: FilterOption) 
  -> [Note] {                                                            
          switch filter {                                                
          case .all:                                                     
              return notes                                               
          case .starred:                                                 
              return notes.filter { $0.isStarred }                       
          case .folder(let folderId):                                    
              return notes.filter { $0.folderId == folderId }            
          }                                                              
      }                                                                  
                                                                         
      private func sortNotes(_ notes: [Note], by sort: SortOption) ->    
  [Note] {                                                               
          switch sort {                                                  
          case .editDate:                                                
              return notes.sorted { $0.editDate > $1.editDate }          
          case .createDate:                                              
              return notes.sorted { $0.createDate > $1.createDate }      
          case .title:                                                   
              return notes.sorted { $0.title < $1.title }                
          }                                                              
      }                                                                  
  }                                                                      
                                                                         
  // MARK: - Supporting Types                                            
  extension NoteListViewModel {                                          
      enum SortOption {                                                  
          case editDate                                                  
          case createDate                                                
          case title                                                     
      }                                                                  
                                                                         
      enum FilterOption {                                                
          case all                                                       
          case starred                                                   
          case folder(String)                                            
      }                                                                  
  }                                                                      
                                                                         
  4.5 æ­¥éª¤ 2.4ï¼šåˆ›å»º NoteEditorViewModelï¼ˆ5 å¤©ï¼‰                         
                                                                         
  æ–‡ä»¶ï¼š                                                                 
  Sources/Presentation/ViewModels/NoteEditor/NoteEditorViewModel.swift   
                                                                         
  import Foundation                                                      
  import Combine                                                         
                                                                         
  /// ç¬”è®°ç¼–è¾‘å™¨ ViewModel                                               
  @MainActor                                                             
  final class NoteEditorViewModel: LoadableViewModel {                   
      // MARK: - Dependencies                                            
      private let noteStorage: NoteStorageProtocol                       
      private let syncService: SyncServiceProtocol                       
                                                                         
      // MARK: - Published Properties                                    
      @Published var note: Note?                                         
      @Published var title: String = ""                                  
      @Published var content: NSAttributedString = NSAttributedString()  
      @Published var hasUnsavedChanges = false                           
                                                                         
      // MARK: - Private Properties                                      
      private var autoSaveTask: Task<Void, Never>?                       
      private let autoSaveDelay: TimeInterval = 2.0                      
                                                                         
      // MARK: - Initialization                                          
      init(                                                              
          noteStorage: NoteStorageProtocol,                              
          syncService: SyncServiceProtocol                               
      ) {                                                                
          self.noteStorage = noteStorage                                 
          self.syncService = syncService                                 
          super.init()                                                   
      }                                                                  
                                                                         
      deinit {                                                           
          autoSaveTask?.cancel()                                         
      }                                                                  
                                                                         
      // MARK: - Setup                                                   
      override func setupBindings() {                                    
          // ç›‘å¬æ ‡é¢˜å˜åŒ–                                                
          $title                                                         
              .dropFirst()                                               
              .sink { [weak self] _ in                                   
                  self?.markAsChanged()                                  
                  self?.scheduleAutoSave()                               
              }                                                          
              .store(in: &cancellables)                                  
                                                                         
          // ç›‘å¬å†…å®¹å˜åŒ–                                                
          $content                                                       
              .dropFirst()                                               
              .sink { [weak self] _ in                                   
                  self?.markAsChanged()                                  
                  self?.scheduleAutoSave()                               
              }                                                          
              .store(in: &cancellables)                                  
      }                                                                  
                                                                         
      // MARK: - Public Methods                                          
      func loadNote(id: String) async {                                  
          await withLoading {                                            
              guard let loadedNote = try noteStorage.fetchNote(id: id)   
  else {                                                                 
                  throw NoteError.notFound                               
              }                                                          
                                                                         
              self.note = loadedNote                                     
              self.title = loadedNote.title                              
              self.content = loadedNote.attributedContent                
              self.hasUnsavedChanges = false                             
          }                                                              
      }                                                                  
                                                                         
      func createNewNote() {                                             
          let newNote = Note(                                            
              id: UUID().uuidString,                                     
              title: "æ–°ç¬”è®°",                                           
              content: "",                                               
              createDate: Date(),                                        
              editDate: Date()                                           
          )                                                              
                                                                         
          self.note = newNote                                            
          self.title = newNote.title                                     
          self.content = NSAttributedString()                            
          self.hasUnsavedChanges = true                                  
      }                                                                  
                                                                         
      func saveNote() async {                                            
          guard var currentNote = note else { return }                   
                                                                         
          await withLoading {                                            
              currentNote.title = title                                  
              currentNote.content = content.string                       
              currentNote.attributedContent = content                    
              currentNote.editDate = Date()                              
                                                                         
              try noteStorage.saveNote(currentNote)                      
                                                                         
              self.note = currentNote                                    
              self.hasUnsavedChanges = false                             
                                                                         
              // è§¦å‘åŒæ­¥                                                
              try await syncService.syncNote(id: currentNote.id)         
          }                                                              
      }                                                                  
                                                                         
      func updateTitle(_ newTitle: String) {                             
          title = newTitle                                               
      }                                                                  
                                                                         
      func updateContent(_ newContent: NSAttributedString) {             
          content = newContent                                           
      }                                                                  
                                                                         
      // MARK: - Private Methods                                         
      private func markAsChanged() {                                     
          hasUnsavedChanges = true                                       
      }                                                                  
                                                                         
      private func scheduleAutoSave() {                                  
          autoSaveTask?.cancel()                                         
                                                                         
          autoSaveTask = Task { [weak self] in                           
              guard let self = self else { return }                      
                                                                         
              try? await Task.sleep(nanoseconds:                         
  UInt64(self.autoSaveDelay * 1_000_000_000))                            
                                                                         
              if !Task.isCancelled {                                     
                  await self.saveNote()                                  
              }                                                          
          }                                                              
      }                                                                  
  }                                                                      
                                                                         
  // MARK: - Errors                                                      
  extension NoteEditorViewModel {                                        
      enum NoteError: Error {                                            
          case notFound                                                  
          case saveFailed                                                
      }                                                                  
  }                                                                      
                                                                         
  4.6 æ­¥éª¤ 2.5ï¼šåˆ›å»ºå…¶ä»– ViewModelï¼ˆ10 å¤©ï¼‰                              
                                                                         
  æŒ‰ç…§ç›¸åŒçš„æ¨¡å¼åˆ›å»ºï¼š                                                   
                                                                         
  1. SyncCoordinator.swift - åŒæ­¥åè°ƒ                                    
  2. AuthenticationViewModel.swift - è®¤è¯ç®¡ç†                            
  3. SearchViewModel.swift - æœç´¢åŠŸèƒ½                                    
  4. FolderViewModel.swift - æ–‡ä»¶å¤¹ç®¡ç†                                  
  5. AudioPanelViewModel.swift - éŸ³é¢‘åŠŸèƒ½                                
                                                                         
  4.7 æ­¥éª¤ 2.6ï¼šåˆ›å»º AppCoordinatorï¼ˆ5 å¤©ï¼‰                              
                                                                         
  æ–‡ä»¶ï¼š Sources/Presentation/Coordinators/AppCoordinator.swift          
                                                                         
  import Foundation                                                      
  import Combine                                                         
                                                                         
  /// åº”ç”¨åè°ƒå™¨ - ç®¡ç†æ‰€æœ‰ ViewModel çš„ç”Ÿå‘½å‘¨æœŸå’Œé€šä¿¡                   
  @MainActor                                                             
  final class AppCoordinator: ObservableObject {                         
      // MARK: - ViewModels                                              
      let noteListViewModel: NoteListViewModel                           
      let noteEditorViewModel: NoteEditorViewModel                       
      let syncCoordinator: SyncCoordinator                               
      let authViewModel: AuthenticationViewModel                         
      let searchViewModel: SearchViewModel                               
      let folderViewModel: FolderViewModel                               
      let audioPanelViewModel: AudioPanelViewModel                       
                                                                         
      // MARK: - Dependencies                                            
      private let container: DIContainer                                 
      private var cancellables = Set<AnyCancellable>()                   
                                                                         
      // MARK: - Initialization                                          
      init(container: DIContainer) {                                     
          self.container = container                                     
                                                                         
          // è§£æä¾èµ–                                                    
          let noteStorage = container.resolve(NoteStorageProtocol.self)  
          let syncService = container.resolve(SyncServiceProtocol.self)  
          let authService =                                              
  container.resolve(AuthenticationServiceProtocol.self)                  
                                                                         
          // åˆ›å»º ViewModels                                             
          self.noteListViewModel = NoteListViewModel(                    
              noteStorage: noteStorage,                                  
              syncService: syncService                                   
          )                                                              
                                                                         
          self.noteEditorViewModel = NoteEditorViewModel(                
              noteStorage: noteStorage,                                  
              syncService: syncService                                   
          )                                                              
                                                                         
          self.syncCoordinator = SyncCoordinator(                        
              syncService: syncService                                   
          )                                                              
                                                                         
          self.authViewModel = AuthenticationViewModel(                  
              authService: authService                                   
          )                                                              
                                                                         
          self.searchViewModel = SearchViewModel(                        
              noteStorage: noteStorage                                   
          )                                                              
                                                                         
          self.folderViewModel = FolderViewModel(                        
              noteStorage: noteStorage                                   
          )                                                              
                                                                         
          self.audioPanelViewModel = AudioPanelViewModel(                
              audioService: container.resolve(AudioServiceProtocol.self) 
          )                                                              
                                                                         
          setupCoordination()                                            
      }                                                                  
                                                                         
      // MARK: - Setup                                                   
      private func setupCoordination() {                                 
          // å½“åˆ—è¡¨ä¸­é€‰æ‹©ç¬”è®°æ—¶ï¼ŒåŠ è½½åˆ°ç¼–è¾‘å™¨                            
          noteListViewModel.$selectedNoteId                              
              .compactMap { $0 }                                         
              .sink { [weak self] noteId in                              
                  Task {                                                 
                      await self?.noteEditorViewModel.loadNote(id:       
  noteId)                                                                
                  }                                                      
              }                                                          
              .store(in: &cancellables)                                  
                                                                         
          // å½“ç¼–è¾‘å™¨ä¿å­˜ç¬”è®°æ—¶ï¼Œåˆ·æ–°åˆ—è¡¨                                
          noteEditorViewModel.$hasUnsavedChanges                         
              .filter { !$0 }                                            
              .sink { [weak self] _ in                                   
                  Task {                                                 
                      await self?.noteListViewModel.loadNotes()          
                  }        
                }                                   
                .store(in: &cancellables)           
                                                    
            // å½“è®¤è¯çŠ¶æ€å˜åŒ–æ—¶ï¼Œè§¦å‘åŒæ­¥           
            authViewModel.$isAuthenticated          
                .filter { $0 }                      
                .sink { [weak self] _ in            
                    Task {                          
                        try? await                  
  self?.syncCoordinator.startSync()                 
                    }                               
                }                                   
                .store(in: &cancellables)           
        }                                           
  }                                                 
                                                    
  4.8 æ­¥éª¤ 2.7ï¼šé€æ­¥è¿ç§»è§†å›¾ï¼ˆ10 å¤©ï¼‰               
                                                    
  è¿ç§»ç­–ç•¥                                          
                                                    
  1. åˆ›å»ºæ–°è§†å›¾ä½¿ç”¨æ–° ViewModel                     
  2. ä¿æŒæ—§è§†å›¾ä½¿ç”¨æ—§ NotesViewModel                
  3. é€ä¸ªè§†å›¾è¿ç§»                                   
  4. æœ€ååˆ é™¤æ—§ NotesViewModel                      
                                                    
  ç¤ºä¾‹ï¼šè¿ç§»ç¬”è®°åˆ—è¡¨è§†å›¾                            
                                                    
  æ–‡ä»¶ï¼š Sources/View/NoteList/NoteListView.swift   
                                                    
  import SwiftUI                                    
                                                    
  struct NoteListView: View {                       
      @ObservedObject var viewModel:                
  NoteListViewModel                                 
                                                    
      var body: some View {                         
          List(viewModel.filteredAndSortedNotes) {  
  note       .toolbar {                                
              ToolbarItem {                         
                  Menu {                            
                      Picker("æ’åº", selection:     
  $viewModel.sortOption) {                          
                          Text("ç¼–è¾‘æ—¶é—´").tag(NoteL
  istViewModel.SortOption.editDate)                 
                          Text("åˆ›å»ºæ—¶é—´").tag(NoteL
  istViewModel.SortOption.createDate)               
                          Text("æ ‡é¢˜").tag(NoteListV
  iewModel.SortOption.title)                        
                      }                             
                  } label: {                        
                      Image(systemName:             
  "arrow.up.arrow.down")                            
                  }                                 
              }                                     
          }                                         
          .task {                                   
              await viewModel.loadNotes()           
          }                                         
      }                                             
  }                                                 
                                                    
  4.9 é˜¶æ®µ 2 éªŒæ”¶æ ‡å‡†                               
                                                    
  - NotesViewModel å·²æ‹†åˆ†ä¸º 7 ä¸ªç‹¬ç«‹çš„ ViewModel    
  - æ¯ä¸ª ViewModel ä¸è¶…è¿‡ 500 è¡Œ                    
  - AppCoordinator åˆ›å»ºå®Œæˆ                         
  - è‡³å°‘ 3 ä¸ªè§†å›¾å·²è¿ç§»åˆ°æ–° ViewModel               
  - æ‰€æœ‰æ–° ViewModel éƒ½æœ‰å•å…ƒæµ‹è¯•                   
  - æ—§ NotesViewModel æ ‡è®°ä¸º deprecated             
                                                    
  ---                                               
  5. é˜¶æ®µ 3ï¼šé‡æ„æœåŠ¡å±‚ï¼ˆ3-4 å‘¨ï¼‰                   
                                                    
  5.1 ç›®æ ‡                                          
                                                    
  - ä¸ºç°æœ‰æœåŠ¡æ·»åŠ åè®®æŠ½è±¡                          
  - é‡æ„å¤§å‹æœåŠ¡æ–‡ä»¶                                
  - å®ç°ä¾èµ–æ³¨å…¥                                    
  - ç§»é™¤å•ä¾‹ä¾èµ–                                    
                                                    
  5.2 æ­¥éª¤ 3.1ï¼šä¸º MiNoteService æ·»åŠ åè®®ï¼ˆ3 å¤©ï¼‰   
                                                    
  åˆ›å»ºåè®®                                          
                                                    
  æ–‡ä»¶ï¼š Sources/Service/Network/Protocols/MiNoteSer
  viceProtocol.swift                                
                                                    
  import Foundation                                 
                                                    
  protocol MiNoteServiceProtocol {                  
      // MARK: - ç¬”è®°æ“ä½œ                           
      func fetchNotes() async throws -> [Note]      
      func fetchNote(id: String) async throws ->    
  Note                                              
      func createNote(_ note: Note) async throws -> 
  Note                                              
      func updateNote(_ note: Note) async throws -> 
  Note                                              
      func deleteNote(id: String) async throws      
                                                    
      // MARK: - æ–‡ä»¶å¤¹æ“ä½œ                         
      func fetchFolders() async throws -> [Folder]  
      func createFolder(_ folder: Folder) async     
  throws -> Folder                                  
      func updateFolder(_ folder: Folder) async     
  throws -> Folder                                  
      func deleteFolder(id: String) async throws    
                                                    
      // MARK: - åŒæ­¥æ“ä½œ                           
      func syncNotes(since: Date?) async throws ->  
  SyncResult                                        
      func uploadChanges(_ changes: [NoteChange])   
  async throws                                      
                                                    
      // MARK: - è®¤è¯æ“ä½œ                           
      func login(username: String, password: String)
   async throws -> User                             
      func logout() async throws                    
      func refreshToken() async throws              
  }                                                 
                                                    
  è®©ç°æœ‰å®ç°éµå¾ªåè®®                                
                                                    
  æ–‡ä»¶ï¼š Sources/Service/Network/MiNoteService.swift
                                                    
  // åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ                                  
  extension MiNoteService: MiNoteServiceProtocol {  
      // ç°æœ‰æ–¹æ³•å·²ç»å®ç°äº†åè®®è¦æ±‚                 
  }                                                 
                                                    
  æ›´æ–°ä¾èµ–æ³¨å…¥å®¹å™¨                                  
                                                    
  æ–‡ä»¶ï¼š Sources/Core/DependencyInjection/ServiceLoc
  ator.swift                                        
                                                    
  func configure() {                                
      // æ³¨å†Œç½‘ç»œæœåŠ¡                               
      DIContainer.shared.register(                  
          MiNoteServiceProtocol.self,               
          instance: MiNoteService.shared            
      )                                             
  }                                                 
                                                    
  5.3 æ­¥éª¤ 3.2ï¼šæ‹†åˆ† MiNoteServiceï¼ˆ5 å¤©ï¼‰          
                                                    
  å½“å‰ MiNoteService.swift æœ‰ 3,375                 
  è¡Œï¼ŒèŒè´£è¿‡å¤šã€‚æ‹†åˆ†ä¸ºï¼š                            
                                                    
  MiNoteService (3,375 è¡Œ)                          
      â†“ æ‹†åˆ†ä¸º                                      
  â”œâ”€â”€ NoteNetworkService (500-600 è¡Œ)      -        
  ç¬”è®°ç½‘ç»œæ“ä½œ                                      
  â”œâ”€â”€ FolderNetworkService (300-400 è¡Œ)    -        
  æ–‡ä»¶å¤¹ç½‘ç»œæ“ä½œ                                    
  â”œâ”€â”€ AuthNetworkService (400-500 è¡Œ)      -        
  è®¤è¯ç½‘ç»œæ“ä½œ                                      
  â”œâ”€â”€ SyncNetworkService (500-600 è¡Œ)      -        
  åŒæ­¥ç½‘ç»œæ“ä½œ                                      
  â””â”€â”€ NetworkClient (400-500 è¡Œ)           -        
  åº•å±‚ç½‘ç»œå®¢æˆ·ç«¯                                    
                                                    
  åˆ›å»º NetworkClient                                
                                                    
  æ–‡ä»¶ï¼š                                            
  Sources/Service/Network/Core/NetworkClient.swift  
                                                    
  import Foundation                                 
                                                    
  /// åº•å±‚ç½‘ç»œå®¢æˆ·ç«¯                                
  final class NetworkClient {                       
      // MARK: - Properties                         
      private let session: URLSession               
      private let baseURL: URL                      
                                                    
      // MARK: - Initialization                     
      init(baseURL: URL, session: URLSession =      
  .shared) {                                        
          self.baseURL = baseURL                    
          self.session = session                    
      }                                             
                                                    
      // MARK: - Request Methods                    
      func request<T: Decodable>(                   
          _ endpoint: String,                       
          method: HTTPMethod = .get,                
          parameters: [String: Any]? = nil,         
          headers: [String: String]? = nil          
      ) async throws -> T {                         
          let url =                                 
  baseURL.appendingPathComponent(endpoint)          
          var request = URLRequest(url: url)        
          request.httpMethod = method.rawValue      
                                                    
          // æ·»åŠ è¯·æ±‚å¤´                             
          headers?.forEach { key, value in          
              request.setValue(value,               
  forHTTPHeaderField: key)                          
          }                                         
                                                    
          // æ·»åŠ è¯·æ±‚ä½“                             
          if let parameters = parameters {          
              request.httpBody = try                
  JSONSerialization.data(withJSONObject: parameters)
              request.setValue("application/json",  
  forHTTPHeaderField: "Content-Type")               
          }                                         
                                                    
          // å‘é€è¯·æ±‚                               
          let (data, response) = try await          
  session.data(for: request)                        
                                                    
          // æ£€æŸ¥å“åº”                               
          guard let httpResponse = response as?     
  HTTPURLResponse else {                            
              throw NetworkError.invalidResponse    
          }                                         
                                                    
          guard                                     
  (200...299).contains(httpResponse.statusCode) else
   {                                                
              throw                                 
  NetworkError.httpError(httpResponse.statusCode)   
          }                                         
                                                    
          // è§£æå“åº”                               
          let decoder = JSONDecoder()               
          return try decoder.decode(T.self, from:   
  data)                                             
      }                                             
  }                                                 
                                                    
  // MARK: - Supporting Types                       
  enum HTTPMethod: String {                         
      case get = "GET"                              
      case post = "POST"                            
      case put = "PUT"                              
      case delete = "DELETE"                        
  }                                                 
                                                    
  enum NetworkError: Error {                        
      case invalidResponse                          
      case httpError(Int)                           
      case decodingError                            
  }                                                 
                                                    
  åˆ›å»º NoteNetworkService                           
                                                    
  æ–‡ä»¶ï¼š Sources/Service/Network/Services/NoteNetwor
  kService.swift                                    
                                                    
  import Foundation                                 
                                                    
  /// ç¬”è®°ç½‘ç»œæœåŠ¡                                  
  final class NoteNetworkService {                  
      // MARK: - Dependencies                       
      private let client: NetworkClient             
                                                    
      // MARK: - Initialization                     
      init(client: NetworkClient) {                 
          self.client = client                      
      }                                             
                                                    
      // MARK: - Public Methods                     
      func fetchNotes() async throws -> [Note] {    
          return try await client.request("/notes") 
      }                                             
                                                    
      func fetchNote(id: String) async throws ->    
  Note {                                            
          return try await                          
  client.request("/notes/\(id)")                    
      }                                             
                                                    
      func createNote(_ note: Note) async throws -> 
  Note {                                            
          return try await client.request(          
              "/notes",                             
              method: .post,                        
              parameters: note.toDictionary()       
          )                                         
      }                                             
                                                    
      func updateNote(_ note: Note) async throws -> 
  Note {                                            
          return try await client.request(          
              "/notes/\(note.id)",                  
              method: .put,                         
              parameters: note.toDictionary()       
          )                                         
      }                                             
                                                    
      func deleteNote(id: String) async throws {    
          let _: EmptyResponse = try await          
  client.request(                                   
              "/notes/\(id)",                       
              method: .delete                       
          )                                         
      }                                             
  }                                                 
                                                    
  // MARK: - Supporting Types                       
  struct EmptyResponse: Decodable {}                
                                                    
  5.4 æ­¥éª¤ 3.3ï¼šé‡æ„ DatabaseServiceï¼ˆ5 å¤©ï¼‰        
                                                    
  å½“å‰ DatabaseService.swift æœ‰ 2,540 è¡Œã€‚æ‹†åˆ†ä¸ºï¼š  
                                                    
  DatabaseService (2,540 è¡Œ)                        
      â†“ æ‹†åˆ†ä¸º                                      
  â”œâ”€â”€ NoteDatabaseService (400-500 è¡Œ)     -        
  ç¬”è®°æ•°æ®åº“æ“ä½œ                                    
  â”œâ”€â”€ FolderDatabaseService (300-400 è¡Œ)   -        
  æ–‡ä»¶å¤¹æ•°æ®åº“æ“ä½œ                                  
  â”œâ”€â”€ SyncStateDatabaseService (300-400 è¡Œ) -       
  åŒæ­¥çŠ¶æ€æ•°æ®åº“æ“ä½œ                                
  â””â”€â”€ DatabaseConnection (300-400 è¡Œ)      -        
  æ•°æ®åº“è¿æ¥ç®¡ç†                                    
                                                    
  åˆ›å»º DatabaseConnection                           
                                                    
  æ–‡ä»¶ï¼š Sources/Service/Storage/Core/DatabaseConnec
  tion.swift                                        
                                                    
  import Foundation                                 
  import SQLite                                     
                                                    
  /// æ•°æ®åº“è¿æ¥ç®¡ç†                                
  final class DatabaseConnection {                  
      // MARK: - Properties                         
      private let connection: Connection            
                                                    
      // MARK: - Initialization                     
      init(path: String) throws {                   
          self.connection = try Connection(path)    
          try setupDatabase()                       
      }                                             
                                                    
      // MARK: - Public Methods                     
      func execute(_ query: String) throws {        
          try connection.execute(query)             
      }                                             
                                                    
      func prepare(_ query: String) throws ->       
  Statement {                                       
          return try connection.prepare(query)      
      }                                             
                                                    
      func transaction(_ block: () throws -> Void)  
  throws {                                          
          try connection.transaction {              
              try block()                           
          }                                         
      }                                             
                                                    
      // MARK: - Private Methods                    
      private func setupDatabase() throws {         
          // åˆ›å»ºè¡¨ç»“æ„                             
          try createNotesTable()                    
          try createFoldersTable()                  
          try createSyncStateTable()                
      }                                             
                                                    
      private func createNotesTable() throws {      
          let sql = """                             
          CREATE TABLE IF NOT EXISTS notes (        
              id TEXT PRIMARY KEY,                  
              title TEXT NOT NULL,                  
              content TEXT,                         
              folder_id TEXT,                       
              is_starred INTEGER DEFAULT 0,         
              create_date INTEGER NOT NULL,         
              edit_date INTEGER NOT NULL            
          )                                         
          """                                       
          try execute(sql)                          
      }                                             
                                                    
      private func createFoldersTable() throws {    
          let sql = """                             
          CREATE TABLE IF NOT EXISTS folders (      
              id TEXT PRIMARY KEY,                  
              name TEXT NOT NULL,                   
              parent_id TEXT,                       
              create_date INTEGER NOT NULL          
          )                                         
          """                                       
          try execute(sql)                          
      }                                             
                                                    
      private func createSyncStateTable() throws {  
          let sql = """                             
          CREATE TABLE IF NOT EXISTS sync_state (   
              note_id TEXT PRIMARY KEY,             
              last_sync_date INTEGER,               
              is_dirty INTEGER DEFAULT 0            
          )                                         
          """                                       
          try execute(sql)                          
      }                                             
  }                                                 
                                                    
  åˆ›å»º NoteDatabaseService                          
                                                    
  æ–‡ä»¶ï¼š Sources/Service/Storage/Services/NoteDataba
  seService.swift                                   
                                                    
  import Foundation                                 
                                                    
  /// ç¬”è®°æ•°æ®åº“æœåŠ¡                                
  final class NoteDatabaseService:                  
  NoteStorageProtocol {                             
      // MARK: - Dependencies                       
      private let connection: DatabaseConnection    
                                                    
      // MARK: - Initialization                     
      init(connection: DatabaseConnection) {        
          self.connection = connection              
      }                                             
                                                    
      // MARK: - NoteStorageProtocol                
      func fetchAllNotes() throws -> [Note] {       
          let sql = "SELECT * FROM notes ORDER BY   
  edit_date DESC"                                   
          let statement = try                       
  connection.prepare(sql)                           
                                                    
          var notes: [Note] = []                    
          for row in statement {                    
              notes.append(try parseNote(from: row))
          }                                         
                                                    
          return notes                              
      }                                             
                                                    
      func fetchNote(id: String) throws -> Note? {  
          let sql = "SELECT * FROM notes WHERE id = 
  ?"                                                
          let statement = try                       
  connection.prepare(sql)                           
                                                    
          guard let row = try                       
  statement.bind(id).step() else {                  
              return nil                            
          }                                         
                                                    
          return try parseNote(from: row)           
      }                                             
                                                    
      func fetchNotes(in folderId: String) throws ->
   [Note] {                                         
          let sql = "SELECT * FROM notes WHERE      
  folder_id = ? ORDER BY edit_date DESC"            
          let statement = try                       
  connection.prepare(sql)                           
                                                    
          var notes: [Note] = []                    
          for row in try statement.bind(folderId) { 
              notes.append(try parseNote(from: row))
          }                                         
                                                    
          return notes                              
      }                                             
                                                    
      func searchNotes(query: String) throws ->     
  [Note] {                                          
          let sql = """                             
          SELECT * FROM notes                       
          WHERE title LIKE ? OR content LIKE ?      
          ORDER BY edit_date DESC                   
          """                                       
          let searchPattern = "%\(query)%"          
          let statement = try                       
  connection.prepare(sql)                           
                                                    
          var notes: [Note] = []                    
          for row in try                            
  statement.bind(searchPattern, searchPattern) {    
              notes.append(try parseNote(from: row))
          }                                         
                                                    
          return notes                              
      }                                             
                                                    
      func saveNote(_ note: Note) throws {          
          let sql = """                             
          INSERT OR REPLACE INTO notes              
          (id, title, content, folder_id,           
  is_starred, create_date, edit_date)               
          VALUES (?, ?, ?, ?, ?, ?, ?)              
          """                                       
                                                    
          try connection.prepare(sql).bind(         
              note.id,                              
              note.title,                           
              note.content,                         
              note.folderId,                        
              note.isStarred ? 1 : 0,               
                                                    
  Int(note.createDate.timeIntervalSince1970),       
                                                    
  Int(note.editDate.timeIntervalSince1970)          
          ).run()                                   
      }                                             
                                                    
      func saveNotes(_ notes: [Note]) throws {      
          try connection.transaction {              
              for note in notes {                   
                  try saveNote(note)                
              }                                     
          }                                         
      }                                             
                                                    
      func deleteNote(id: String) throws {          
          let sql = "DELETE FROM notes WHERE id = ?"
          try connection.prepare(sql).bind(id).run()
      }                                             
                                                    
      func deleteNotes(ids: [String]) throws {      
          try connection.transaction {              
              for id in ids {                       
                  try deleteNote(id: id)            
              }                                     
          }                                         
      }                                             
                                                    
      func performBatchUpdate(_ block: () throws -> 
  Void) throws {                                    
          try connection.transaction {              
              try block()                           
          }                                         
      }                                             
                                                    
      // MARK: - Private Methods                    
      private func parseNote(from row:              
  Statement.Element) throws -> Note {               
          return Note(                              
              id: row[0] as! String,                
              title: row[1] as! String,             
              content: row[2] as? String ?? "",     
              folderId: row[3] as? String,          
              isStarred: (row[4] as! Int) == 1,     
              createDate:                           
  Date(timeIntervalSince1970: TimeInterval(row[5]   
  as! Int)),                                        
              editDate: Date(timeIntervalSince1970: 
  TimeInterval(row[6] as! Int))                     
          )                                         
      }                                             
  }                                                 
                                                    
  5.5 æ­¥éª¤ 3.4ï¼šç§»é™¤å•ä¾‹ä¾èµ–ï¼ˆ7 å¤©ï¼‰                
                                                    
  è¿ç§»ç­–ç•¥                                          
                                                    
  1. è¯†åˆ«æ‰€æœ‰å•ä¾‹ä½¿ç”¨                               
  2. ä¸ºæ¯ä¸ªå•ä¾‹åˆ›å»ºåè®®                             
  3. é€šè¿‡ä¾èµ–æ³¨å…¥ä¼ é€’                               
  4. é€æ­¥ç§»é™¤ .shared è°ƒç”¨                          
                                                    
  ç¤ºä¾‹ï¼šç§»é™¤ MiNoteService.shared                   
                                                    
  ä¹‹å‰ï¼ˆä½¿ç”¨å•ä¾‹ï¼‰ï¼š                                
                                                    
  class NotesViewModel {                            
      private let service = MiNoteService.shared    
                                                    
      func loadNotes() async {                      
          let notes = try await service.fetchNotes()
      }                                             
  }                                                 
                                                    
  ä¹‹åï¼ˆä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼‰ï¼š                            
                                                    
  class NoteListViewModel {                         
      private let noteService: NoteServiceProtocol  
                                                    
      init(noteService: NoteServiceProtocol) {      
          self.noteService = noteService            
      }                                             
                                                    
      func loadNotes() async {                      
          let notes = try await                     
  noteService.fetchNotes()                          
      }                                             
  }                                                 
                                                    
  è¿ç§»æ¸…å•                                          
                                                    
  åˆ›å»ºä¸€ä¸ªè¿ç§»æ¸…å•æ¥è·Ÿè¸ªè¿›åº¦ï¼š                      
                                                    
  æ–‡ä»¶ï¼š Docs/SingletonMigration.md                 
                                                    
  # å•ä¾‹è¿ç§»æ¸…å•                                    
                                                    
  ## ç½‘ç»œæœåŠ¡                                       
  - [ ] MiNoteService.shared â†’ NoteServiceProtocol  
  - [ ] NetworkRequestManager.shared â†’ NetworkClient
                                                    
  ## å­˜å‚¨æœåŠ¡                                       
  - [ ] DatabaseService.shared â†’ NoteStorageProtocol
  - [ ] LocalStorageService.shared â†’                
  LocalStorageProtocol                              
  - [ ] MemoryCacheManager.shared â†’                 
  CacheServiceProtocol                              
                                                    
  ## åŒæ­¥æœåŠ¡                                       
  - [ ] SyncService.shared â†’ SyncServiceProtocol    
  - [ ] UnifiedOperationQueue.shared â†’              
  OperationQueueProtocol                            
  - [ ] OperationProcessor.shared â†’                 
  OperationProcessorProtocol                        
                                                    
  ## å…¶ä»–æœåŠ¡                                       
  - [ ] NetworkMonitor.shared â†’                     
  NetworkMonitorProtocol                            
  - [ ] AudioPlayerService.shared â†’                 
  AudioServiceProtocol                              
  - [ ] AudioRecorderService.shared â†’               
  AudioRecorderProtocol                             
                                                    
  ## è¿ç§»è¿›åº¦                                       
  - æ€»è®¡ï¼š45 ä¸ªå•ä¾‹                                 
  - å·²è¿ç§»ï¼š0 ä¸ª                                    
  - å‰©ä½™ï¼š45 ä¸ª                                     
                                                    
  5.6 é˜¶æ®µ 3 éªŒæ”¶æ ‡å‡†                               
                                                    
  - æ‰€æœ‰ä¸»è¦æœåŠ¡éƒ½æœ‰åè®®æŠ½è±¡                        
  - MiNoteService å·²æ‹†åˆ†ä¸º 5 ä¸ªç‹¬ç«‹æœåŠ¡             
  - DatabaseService å·²æ‹†åˆ†ä¸º 4 ä¸ªç‹¬ç«‹æœåŠ¡           
  - è‡³å°‘ 50% çš„å•ä¾‹å·²è¿ç§»åˆ°ä¾èµ–æ³¨å…¥                 
  - æ‰€æœ‰æ–°æœåŠ¡éƒ½æœ‰å•å…ƒæµ‹è¯•                          
  - æœåŠ¡å±‚æ–‡æ¡£æ›´æ–°å®Œæˆ                              
                                                    
  ---                                               
  6. é˜¶æ®µ 4ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆ2-3 å‘¨ï¼‰                     
                                                    
  6.1 ç›®æ ‡                                          
                                                    
  - ä¼˜åŒ–ä¸»çº¿ç¨‹ä½¿ç”¨                                  
  - å®ç°æ‡’åŠ è½½å’Œåˆ†é¡µ                                
  - ä¼˜åŒ–å†…å­˜ç®¡ç†                                    
  - å‡å°‘ä¸å¿…è¦çš„ SwiftUI é‡æ¸²æŸ“                     
                                                    
  6.2 æ­¥éª¤ 4.1ï¼šä¼˜åŒ–ä¸»çº¿ç¨‹ä½¿ç”¨ï¼ˆ5 å¤©ï¼‰              
                                                    
  é—®é¢˜åˆ†æ                                          
                                                    
  å½“å‰é—®é¢˜ï¼š                                        
  - 30+ @MainActor æ³¨è§£å¼ºåˆ¶æ‰€æœ‰å·¥ä½œåœ¨ä¸»çº¿ç¨‹         
  - æ•°æ®åº“æ“ä½œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ                          
  - å¤§é‡åŒæ­¥æ“ä½œé˜»å¡ UI                             
                                                    
  è§£å†³æ–¹æ¡ˆ                                          
                                                    
  åˆ›å»ºåå°ä»»åŠ¡ç®¡ç†å™¨                                
                                                    
  æ–‡ä»¶ï¼š Sources/Core/Concurrency/BackgroundTaskMana
  ger.swift                                         
                                                    
  import Foundation                                 
                                                    
  /// åå°ä»»åŠ¡ç®¡ç†å™¨                                
  actor BackgroundTaskManager {                     
      static let shared = BackgroundTaskManager()   
                                                    
      private init() {}                             
                                                    
      /// åœ¨åå°æ‰§è¡Œä»»åŠ¡                            
      func execute<T>(_ operation: @Sendable ()     
  async throws -> T) async rethrows -> T {          
          return try await operation()              
      }                                             
                                                    
      /// åœ¨åå°æ‰§è¡Œå¤šä¸ªä»»åŠ¡å¹¶ç­‰å¾…å…¨éƒ¨å®Œæˆ          
      func executeAll<T>(_ operations: [@Sendable ()
   async throws -> T]) async throws -> [T] {        
          return try await withThrowingTaskGroup(of:
   T.self) { group in                               
              for operation in operations {         
                  group.addTask {                   
                      try await operation()         
                  }                                 
              }                                     
                                                    
              var results: [T] = []                 
              for try await result in group {       
                  results.append(result)            
              }                                     
                                                    
              return results                        
          }                                         
      }                                             
  }                                                 
                                                    
  ä¼˜åŒ– ViewModel                                    
                                                    
  ä¹‹å‰ï¼ˆä¸»çº¿ç¨‹é˜»å¡ï¼‰ï¼š                              
                                                    
  @MainActor                                        
  func loadNotes() async {                          
      let notes = try await                         
  noteStorage.fetchAllNotes() // é˜»å¡ä¸»çº¿ç¨‹         
      self.notes = notes                            
  }                                                 
                                                    
  ä¹‹åï¼ˆåå°æ‰§è¡Œï¼‰ï¼š                                
                                                    
  @MainActor                                        
  func loadNotes() async {                          
      let notes = await                             
  BackgroundTaskManager.shared.execute {            
          try await noteStorage.fetchAllNotes() //  
  åœ¨åå°æ‰§è¡Œ                                        
      }                                             
      self.notes = notes // åªæœ‰ UI æ›´æ–°åœ¨ä¸»çº¿ç¨‹    
  }                                                 
                                                    
  6.3 æ­¥éª¤ 4.2ï¼šå®ç°åˆ†é¡µåŠ è½½ï¼ˆ5 å¤©ï¼‰                
                                                    
  åˆ›å»ºåˆ†é¡µåè®®                                      
                                                    
  æ–‡ä»¶ï¼š Sources/Core/Pagination/Pageable.swift     
                                                    
  import Foundation                                 
                                                    
  /// åˆ†é¡µåè®®                                      
  protocol Pageable {                               
      associatedtype Item                           
                                                    
      var items: [Item] { get }                     
      var hasMore: Bool { get }                     
      var isLoading: Bool { get }                   
                                                    
      func loadMore() async throws                  
      func refresh() async throws                   
  }                                                 
                                                    
  /// åˆ†é¡µçŠ¶æ€                                      
  struct PageInfo {                                 
      let page: Int                                 
      let pageSize: Int                             
      let totalCount: Int                           
                                                    
      var hasMore: Bool {                           
          return page * pageSize < totalCount       
      }                                             
  }                                                 
                                                    
  å®ç°åˆ†é¡µ ViewModel                                
                                                    
  æ–‡ä»¶ï¼š Sources/Presentation/ViewModels/Base/Pageab
  leViewModel.swift                                 
                                                    
  import Foundation                                 
  import Combine                                    
                                                    
  /// æ”¯æŒåˆ†é¡µçš„ ViewModel                          
  @MainActor                                        
  class PageableViewModel<Item>: LoadableViewModel, 
  Pageable {                                        
      // MARK: - Published Properties               
      @Published var items: [Item] = []             
      @Published var hasMore = true                 
      @Published var isLoadingMore = false          
                                                    
      // MARK: - Private Properties                 
      private var currentPage = 0                   
      private let pageSize = 50                     
                                                    
      // MARK: - Pageable                           
      func loadMore() async throws {                
          guard hasMore && !isLoadingMore else {    
  return }                                          
                                                    
          isLoadingMore = true                      
          defer { isLoadingMore = false }           
                                                    
          let newItems = try await fetchPage(page:  
  currentPage + 1, pageSize: pageSize)              
                                                    
          if newItems.count < pageSize {            
              hasMore = false                       
          }                                         
                                                    
          items.append(contentsOf: newItems)        
          currentPage += 1                          
      }                                             
                                                    
      func refresh() async throws {                 
          currentPage = 0                           
          hasMore = true                            
          items = []                                
                                                    
          try await loadMore()                      
      }                                             
                                                    
      // MARK: - Abstract Methods                   
      /// å­ç±»å®ç°æ­¤æ–¹æ³•æ¥è·å–åˆ†é¡µæ•°æ®              
      func fetchPage(page: Int, pageSize: Int) async
   throws -> [Item] {                               
          fatalError("Subclass must implement       
  fetchPage")                                       
      }                                             
  }                                                 
                                                    
  ä½¿ç”¨åˆ†é¡µ ViewModel                                
                                                    
  æ–‡ä»¶ï¼š Sources/Presentation/ViewModels/NoteList/No
  teListViewModel.swift                             
                                                    
  @MainActor                                        
  final class NoteListViewModel:                    
  PageableViewModel<Note> {                         
      private let noteStorage: NoteStorageProtocol  
                                                    
      init(noteStorage: NoteStorageProtocol) {      
          self.noteStorage = noteStorage            
          super.init()                              
      }                                             
                                                    
      override func fetchPage(page: Int, pageSize:  
  Int) async throws -> [Note] {                     
          return try await                          
  BackgroundTaskManager.shared.execute {            
              try self.noteStorage.fetchNotes(page: 
  page, pageSize: pageSize)                         
          }                                         
      }                                             
  }                                                 
                                                    
  6.4 æ­¥éª¤ 4.3ï¼šä¼˜åŒ– SwiftUI é‡æ¸²æŸ“ï¼ˆ4 å¤©ï¼‰         
                                                    
  é—®é¢˜åˆ†æ                                          
                                                    
  å½“å‰é—®é¢˜ï¼š                                        
  - 50+ @Published å±æ€§å¯¼è‡´è¿‡åº¦æ¸²æŸ“                 
  - æ¯æ¬¡å±æ€§å˜åŒ–éƒ½è§¦å‘æ•´ä¸ªè§†å›¾æ ‘é‡æ¸²æŸ“              
  - æ²¡æœ‰ä½¿ç”¨ @Published çš„ç»†ç²’åº¦æ§åˆ¶                
                                                    
  è§£å†³æ–¹æ¡ˆ 1ï¼šæ‹†åˆ†çŠ¶æ€å¯¹è±¡                          
                                                    
  ä¹‹å‰ï¼ˆå•ä¸€å¤§å¯¹è±¡ï¼‰ï¼š                              
                                                    
  class NotesViewModel: ObservableObject {          
      @Published var notes: [Note] = []             
      @Published var selectedNoteId: String?        
      @Published var isLoading = false              
      @Published var error: Error?                  
      @Published var sortOption: SortOption =       
  .editDate                                         
      @Published var filterOption: FilterOption =   
  .all                                              
      // ... 50+ ä¸ªå±æ€§                             
  }                                                 
                                                    
  ä¹‹åï¼ˆæ‹†åˆ†çŠ¶æ€ï¼‰ï¼š                                
                                                    
  // åˆ—è¡¨çŠ¶æ€                                       
  class NoteListState: ObservableObject {           
      @Published var notes: [Note] = []             
      @Published var selectedNoteId: String?        
  }                                                 
                                                    
  // UI çŠ¶æ€                                        
  class NoteListUIState: ObservableObject {         
      @Published var sortOption: SortOption =       
  .editDate                                         
      @Published var filterOption: FilterOption =   
  .all                                              
  }                                                 
                                                    
  // åŠ è½½çŠ¶æ€                                       
  class LoadingState: ObservableObject {            
      @Published var isLoading = false              
      @Published var error: Error?                  
  }                                                 
                                                    
  // ViewModel ç»„åˆçŠ¶æ€                             
  class NoteListViewModel: ObservableObject {       
      @Published var listState = NoteListState()    
      @Published var uiState = NoteListUIState()    
      @Published var loadingState = LoadingState()  
  }                                                 
                                                    
  è§£å†³æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ @Published çš„ç»†ç²’åº¦æ§åˆ¶          
                                                    
  class NoteListViewModel: ObservableObject {       
      // åªåœ¨çœŸæ­£éœ€è¦è§¦å‘ UI æ›´æ–°æ—¶æ‰ä½¿ç”¨ @Published
      @Published private(set) var notes: [Note] = []
                                                    
      // å†…éƒ¨çŠ¶æ€ä¸éœ€è¦ @Published                  
      private var allNotes: [Note] = []             
      private var currentFilter: FilterOption = .all
                                                    
      func updateFilter(_ filter: FilterOption) {   
          currentFilter = filter                    
          // åªåœ¨æœ€åæ›´æ–° @Published                
  å±æ€§ï¼Œè§¦å‘ä¸€æ¬¡æ¸²æŸ“                                
          notes = applyFilter(allNotes, filter:     
  filter)                                           
      }                                             
  }                                                 
                                                    
  è§£å†³æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ equatable é¿å…ä¸å¿…è¦çš„æ›´æ–°       
                                                    
  struct Note: Identifiable, Equatable {            
      let id: String                                
      var title: String                             
      var content: String                           
                                                    
      // å®ç° Equatableï¼ŒSwiftUI                    
  ä¼šè‡ªåŠ¨è·³è¿‡ç›¸åŒå€¼çš„æ›´æ–°                            
      static func == (lhs: Note, rhs: Note) -> Bool 
  {                                                 
          return lhs.id == rhs.id &&                
                 lhs.title == rhs.title &&          
                 lhs.content == rhs.content         
      }                                             
  }                                                 
                                                    
  6.5 æ­¥éª¤ 4.4ï¼šå†…å­˜ç®¡ç†ä¼˜åŒ–ï¼ˆ4 å¤©ï¼‰                
                                                    
  é—®é¢˜åˆ†æ                                          
                                                    
  å½“å‰é—®é¢˜ï¼š                                        
  - 45+ å•ä¾‹æ°¸ä¸é‡Šæ”¾                                
  - å¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼                            
  - å¤§å¯¹è±¡å¸¸é©»å†…å­˜                                  
                                                    
  è§£å†³æ–¹æ¡ˆ 1ï¼šä½¿ç”¨å¼±å¼•ç”¨æ‰“ç ´å¾ªç¯                    
                                                    
  ä¹‹å‰ï¼ˆå¾ªç¯å¼•ç”¨ï¼‰ï¼š                                
                                                    
  class NotesViewModel {                            
      let coordinator: ViewStateCoordinator         
                                                    
      init() {                                      
          self.coordinator =                        
  ViewStateCoordinator(viewModel: self)             
      }                                             
  }                                                 
                                                    
  class ViewStateCoordinator {                      
      let viewModel: NotesViewModel // å¼ºå¼•ç”¨       
  }                                                 
                                                    
  ä¹‹åï¼ˆå¼±å¼•ç”¨ï¼‰ï¼š                                  
                                                    
  class NotesViewModel {                            
      lazy var coordinator: ViewStateCoordinator = {
          ViewStateCoordinator(viewModel: self)     
      }()                                           
  }                                                 
                                                    
  class ViewStateCoordinator {                      
      weak var viewModel: NotesViewModel? // å¼±å¼•ç”¨ 
  }                                                 
                                                    
  è§£å†³æ–¹æ¡ˆ 2ï¼šå®ç°ç¼“å­˜æ·˜æ±°ç­–ç•¥                      
                                                    
  æ–‡ä»¶ï¼š                                            
  Sources/Service/Storage/Cache/LRUCache.swift      
                                                    
  import Foundation                                 
                                                    
  /// LRU ç¼“å­˜                                      
  final class LRUCache<Key: Hashable, Value> {      
      private struct CacheEntry {                   
          let key: Key                              
          let value: Value                          
          var accessTime: Date                      
      }                                             
                                                    
      private var cache: [Key: CacheEntry] = [:]    
      private let maxSize: Int                      
      private let queue = DispatchQueue(label:      
  "com.minote.lrucache")                            
                                                    
      init(maxSize: Int = 100) {                    
          self.maxSize = maxSize                    
      }                                             
                                                    
      func get(_ key: Key) -> Value? {              
          return queue.sync {                       
              guard var entry = cache[key] else {   
                  return nil                        
              }                                     
                                                    
              entry.accessTime = Date()             
              cache[key] = entry                    
              return entry.value                    
          }                                         
      }                                             
                                                    
      func set(_ key: Key, value: Value) {          
          queue.sync {                              
              if cache.count >= maxSize {           
                  evictLeastRecentlyUsed()          
              }                                     
                                                    
              cache[key] = CacheEntry(              
                  key: key,                         
                  value: value,                     
                  accessTime: Date()                
              )                                     
          }                                         
      }                                             
                                                    
      func remove(_ key: Key) {                     
          queue.sync {                              
              cache.removeValue(forKey: key)        
          }                                         
      }                                             
                                                    
      func clear() {                                
          queue.sync {                              
              cache.removeAll()                     
          }                                         
      }                                             
                                                    
      private func evictLeastRecentlyUsed() {       
          guard let lruEntry = cache.values.min(by: 
  { $0.accessTime < $1.accessTime }) else {         
              return                                
          }                                         
                                                    
          cache.removeValue(forKey: lruEntry.key)   
      }                                             
  }                                                 
                                                    
  è§£å†³æ–¹æ¡ˆ 3ï¼šå®ç°å›¾ç‰‡ç¼“å­˜ç®¡ç†                      
                                                    
  final class ImageCacheManager {                   
      private let memoryCache = LRUCache<String,    
  NSImage>(maxSize: 50)                             
      private let diskCache: DiskCache              
                                                    
      func getImage(for id: String) async ->        
  NSImage? {                                        
          // å…ˆæŸ¥å†…å­˜ç¼“å­˜                           
          if let image = memoryCache.get(id) {      
              return image                          
          }                                         
                                                    
          // å†æŸ¥ç£ç›˜ç¼“å­˜                           
          if let image = await                      
  diskCache.getImage(for: id) {                     
              memoryCache.set(id, value: image)     
              return image                          
          }                                         
                                                    
          return nil                                
      }                                             
                                                    
      func setImage(_ image: NSImage, for id:       
  String) async {                                   
          memoryCache.set(id, value: image)         
          await diskCache.setImage(image, for: id)  
      }                                             
                                                    
      func clearMemoryCache() {                     
          memoryCache.clear()                       
      }                                             
  }                                                 
                                                    
  6.6 é˜¶æ®µ 4 éªŒæ”¶æ ‡å‡†                               
                                                    
  - æ•°æ®åº“æ“ä½œç§»åˆ°åå°çº¿ç¨‹                          
  - ç¬”è®°åˆ—è¡¨å®ç°åˆ†é¡µåŠ è½½                            
  - SwiftUI é‡æ¸²æŸ“æ¬¡æ•°å‡å°‘ 50%+                     
  - å†…å­˜ä½¿ç”¨å‡å°‘ 30%+                               
  - åº”ç”¨å¯åŠ¨æ—¶é—´å‡å°‘ 20%+                           
  - æ€§èƒ½æµ‹è¯•é€šè¿‡                                    
                                                    
  ## 7. é£é™©ç®¡ç†ä¸å›æ»šç­–ç•¥                          
                                                    
  ### 7.1 é£é™©è¯†åˆ«                                  
                                                    
  | é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |               
  |------|--------|------|----------|               
  | é‡æ„å¼•å…¥æ–° bug | é«˜ | é«˜ |                      
  å…¨é¢çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• |                        
  | æ€§èƒ½ä¸‹é™ | ä¸­ | é«˜ |                            
  æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œæ¯æ¬¡é‡æ„åå¯¹æ¯” |                    
  | å›¢é˜Ÿæˆå‘˜ä¸é€‚åº”æ–°æ¶æ„ | ä¸­ | ä¸­ |                
  åŸ¹è®­ã€æ–‡æ¡£ã€ä»£ç å®¡æŸ¥ |                            
  | é‡æ„æ—¶é—´è¶…å‡ºé¢„æœŸ | é«˜ | ä¸­ |                    
  åˆ†é˜¶æ®µè¿›è¡Œï¼Œæ¯ä¸ªé˜¶æ®µå¯ç‹¬ç«‹äº¤ä»˜ |                  
  | æ–°æ—§ä»£ç å†²çª | ä¸­ | ä¸­ | ä½¿ç”¨ Feature Flag éš”ç¦» 
  |                                                 
  | æ•°æ®è¿ç§»å¤±è´¥ | ä½ | é«˜ | æ•°æ®å¤‡ä»½ã€è¿ç§»è„šæœ¬æµ‹è¯• 
  |                                                 
                                                    
  ### 7.2 å›æ»šç­–ç•¥                                  
                                                    
  #### 7.2.1 ä½¿ç”¨ Feature Flag                      
                                                    
  **æ–‡ä»¶ï¼š**                                        
  `Sources/Core/FeatureFlags/FeatureFlags.swift`    
                                                    
  ```swift                                          
  import Foundation                                 
                                                    
  /// åŠŸèƒ½å¼€å…³                                      
  enum FeatureFlags {                               
      // MARK: - æ¶æ„é‡æ„ç›¸å…³                       
      static var useNewViewModel = false            
      static var useNewServiceLayer = false         
      static var useDependencyInjection = false     
      static var usePagination = false              
                                                    
      // MARK: - é…ç½®                               
      static func configure(environment:            
  Environment) {                                    
          switch environment {                      
          case .development:                        
              useNewViewModel = true                
              useNewServiceLayer = true             
              useDependencyInjection = true         
              usePagination = true                  
                                                    
          case .staging:                            
              useNewViewModel = true                
              useNewServiceLayer = false            
              useDependencyInjection = true         
              usePagination = false                 
                                                    
          case .production:                         
              useNewViewModel = false               
              useNewServiceLayer = false            
              useDependencyInjection = false        
              usePagination = false                 
          }                                         
      }                                             
  }                                                 
                                                    
  enum Environment {                                
      case development                              
      case staging                                  
      case production                               
  }                                                 
                                                    
  7.2.2 ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿‡æ¸¡                          
                                                    
  æ–‡ä»¶ï¼š Sources/Presentation/Adapters/ViewModelAdap
  ter.swift                                         
                                                    
  import Foundation                                 
                                                    
  /// ViewModel é€‚é…å™¨ - åœ¨æ–°æ—§ ViewModel ä¹‹é—´åˆ‡æ¢  
  @MainActor                                        
  final class ViewModelAdapter {                    
      static func createNoteListViewModel() -> any  
  ObservableObject {                                
          if FeatureFlags.useNewViewModel {         
              // ä½¿ç”¨æ–° ViewModel                   
              let noteStorage = DIContainer.shared.r
  esolve(NoteStorageProtocol.self)                  
              let syncService = DIContainer.shared.r
  esolve(SyncServiceProtocol.self)                  
              return NoteListViewModel(noteStorage: 
  noteStorage, syncService: syncService)            
          } else {                                  
              // ä½¿ç”¨æ—§ ViewModel                   
              return NotesViewModel()               
          }                                         
      }                                             
  }                                                 
                                                    
  ##7.2.3 Git åˆ†æ”¯ç­–ç•¥                                
                                                    
  main (ç”Ÿäº§ç¯å¢ƒ)                                   
    â†‘                                               
    â””â”€â”€ release/v2.0 (é¢„å‘å¸ƒ)                       
          â†‘                                         
          â””â”€â”€ develop (å¼€å‘ä¸»åˆ†æ”¯)                  
                â†‘                                   
                â”œâ”€â”€ feature/refactor-viewmodel (é˜¶æ®µ
   2)                                               
                â”œâ”€â”€ feature/refactor-services (é˜¶æ®µ 
  3)                                                
                â””â”€â”€ feature/performance-optimization
   (é˜¶æ®µ 4)                                         
                                                    
  åˆ†æ”¯è§„åˆ™ï¼š                                        
  - main: åªæ¥å—ç»è¿‡å……åˆ†æµ‹è¯•çš„ä»£ç                   
  - release: å‘å¸ƒå€™é€‰ç‰ˆæœ¬ï¼Œåªä¿®å¤ bug             
  - develop: å¼€å‘ä¸»åˆ†æ”¯ï¼Œé›†æˆæ‰€æœ‰åŠŸèƒ½               
  - feature: åŠŸèƒ½åˆ†æ”¯ï¼Œå®Œæˆååˆå¹¶åˆ° develop       
                                                    
  ##7.2.4 å›æ»šæ£€æŸ¥æ¸…å•                                
                                                    
  æ¯ä¸ªé˜¶æ®µå®Œæˆåæ£€æŸ¥ï¼š                              
                                                    
  - æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡                                
  - æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡                                
  - æ€§èƒ½æµ‹è¯•é€šè¿‡ï¼ˆä¸ä½äºåŸºå‡†çš„ 95%ï¼‰                
  - å†…å­˜ä½¿ç”¨æ­£å¸¸ï¼ˆä¸è¶…è¿‡åŸºå‡†çš„ 110%ï¼‰               
  - æ‰‹åŠ¨æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸                            
  - ä»£ç å®¡æŸ¥é€šè¿‡                                    
  - æ–‡æ¡£æ›´æ–°å®Œæˆ                                    
                                                    
  å¦‚æœä»»ä½•ä¸€é¡¹å¤±è´¥ï¼š                                
  1. ç«‹å³åœæ­¢åˆå¹¶                                   
  2. åˆ†æå¤±è´¥åŸå›                                    
  3. ä¿®å¤é—®é¢˜æˆ–å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬                 
  4. é‡æ–°æµ‹è¯•                                       
                                                    
  7.3 æµ‹è¯•ç­–ç•¥                                      
                                                    
  7.3.1 å•å…ƒæµ‹è¯•                                    
                                                    
  ç›®æ ‡è¦†ç›–ç‡ï¼š 80%+                                 
                                                    
  é‡ç‚¹æµ‹è¯•ï¼š                                        
  - æ‰€æœ‰ ViewModel çš„ä¸šåŠ¡é€»è¾‘                       
  - æ‰€æœ‰ Service çš„æ ¸å¿ƒåŠŸèƒ½                         
  - æ•°æ®è½¬æ¢å’Œæ ¼å¼åŒ–                                
  - é”™è¯¯å¤„ç†                                        
                                                    
  ç¤ºä¾‹æµ‹è¯•ï¼š                                        
                                                    
  æ–‡ä»¶ï¼š                                            
  Tests/ViewModels/NoteListViewModelTests.swift     
                                                    
  import XCTest                                     
  @testable import MiNoteMac                        
                                                    
  @MainActor                                        
  final class NoteListViewModelTests: BaseTestCase {
      var viewModel: NoteListViewModel!             
      var mockStorage: MockNoteStorage!             
      var mockSyncService: MockSyncService!         
                                                    
      override func setUp() {                       
          super.setUp()                             
                                                    
          mockStorage = MockNoteStorage()           
          mockSyncService = MockSyncService()       
                                                    
          viewModel = NoteListViewModel(            
              noteStorage: mockStorage,             
              syncService: mockSyncService          
          )                                         
      }                                             
                                                    
      func testLoadNotes_Success() async throws {   
          // Given                                  
          let expectedNotes = [                     
              Note(id: "1", title: "Note 1",        
  content: "Content 1"),                            
              Note(id: "2", title: "Note 2",        
  content: "Content 2")                             
          ]                                         
          mockStorage.mockNotes = expectedNotes     
                                                    
          // When                                   
          await viewModel.loadNotes()               
                                                    
          // Then                                   
          XCTAssertEqual(viewModel.notes.count, 2)  
          XCTAssertEqual(viewModel.notes[0].id, "1")
          XCTAssertEqual(viewModel.notes[1].id, "2")
          XCTAssertFalse(viewModel.isLoading)       
          XCTAssertNil(viewModel.error)             
      }                                             
                                                    
      func testLoadNotes_Failure() async throws {   
          // Given                                  
          mockStorage.mockError = NSError(domain:   
  "Test", code: 500)                                
                                                    
          // When                                   
          await viewModel.loadNotes()               
                                                    
          // Then                                   
          XCTAssertTrue(viewModel.notes.isEmpty)    
          XCTAssertNotNil(viewModel.error)          
          XCTAssertFalse(viewModel.isLoading)       
      }                                             
                                                    
      func testSelectNote() {                       
          // Given                                  
          let note = Note(id: "1", title: "Note 1", 
  content: "Content 1")                             
          viewModel.notes = [note]                  
                                                    
          // When                                   
          viewModel.selectNote(note)                
                                                    
          // Then                                   
          XCTAssertEqual(viewModel.selectedNoteId,  
  "1")                                              
          XCTAssertEqual(viewModel.selectedNote?.id,
   "1")                                             
      }                                             
                                                    
      func testDeleteNote() async throws {          
          // Given                                  
          let note = Note(id: "1", title: "Note 1", 
  content: "Content 1")                             
          viewModel.notes = [note]                  
          viewModel.selectedNoteId = "1"            
                                                    
          // When                                   
          await viewModel.deleteNote(note)          
                                                    
          // Then                                   
          XCTAssertTrue(viewModel.notes.isEmpty)    
          XCTAssertNil(viewModel.selectedNoteId)    
                                                    
  XCTAssertEqual(mockStorage.deleteNoteCallCount, 1)
      }                                             
                                                    
      func testFilterNotes_Starred() {              
          // Given                                  
          viewModel.notes = [                       
              Note(id: "1", title: "Note 1",        
  content: "", isStarred: true),                    
              Note(id: "2", title: "Note 2",        
  content: "", isStarred: false),                   
              Note(id: "3", title: "Note 3",        
  content: "", isStarred: true)                     
          ]                                         
                                                    
          // When                                   
          viewModel.changeFilterOption(.starred)    
                                                    
          // Then                                   
          let filtered =                            
  viewModel.filteredAndSortedNotes                  
          XCTAssertEqual(filtered.count, 2)         
          XCTAssertTrue(filtered.allSatisfy {       
  $0.isStarred })                                   
      }                                             
                                                    
      func testSortNotes_ByTitle() {                
          // Given                                  
          viewModel.notes = [                       
              Note(id: "1", title: "C Note",        
  content: ""),                                     
              Note(id: "2", title: "A Note",        
  content: ""),                                     
              Note(id: "3", title: "B Note",        
  content: "")                                      
          ]                                         
                                                    
          // When                                   
          viewModel.changeSortOption(.title)        
                                                    
          // Then                                   
          let sorted =                              
  viewModel.filteredAndSortedNotes                  
          XCTAssertEqual(sorted[0].title, "A Note") 
          XCTAssertEqual(sorted[1].title, "B Note") 
          XCTAssertEqual(sorted[2].title, "C Note") 
      }                                             
  }                                                 
                                                    
  7.3.2 é›†æˆæµ‹è¯•                                    
                                                    
  ç›®æ ‡ï¼š æµ‹è¯•ç»„ä»¶ä¹‹é—´çš„äº¤äº’                         
                                                    
  ç¤ºä¾‹ï¼š                                            
                                                    
  æ–‡ä»¶ï¼š Tests/Integration/NoteFlowTests.swift      
                                                    
  import XCTest                                     
  @testable import MiNoteMac                        
                                                    
  @MainActor                                        
  final class NoteFlowTests: XCTestCase {           
      var coordinator: AppCoordinator!              
      var container: DIContainer!                   
                                                    
      override func setUp() async throws {          
          try await super.setUp()                   
                                                    
          // è®¾ç½®æµ‹è¯•ç¯å¢ƒ                           
          container = DIContainer()                 
          setupTestServices()                       
                                                    
          coordinator = AppCoordinator(container:   
  container)                                        
      }                                             
                                                    
      func testCreateAndEditNoteFlow() async throws 
  {                                                 
          // 1. åˆ›å»ºæ–°ç¬”è®°                          
                                                    
  coordinator.noteEditorViewModel.createNewNote()   
                                                    
          XCTAssertNotNil(coordinator.noteEditorView
  Model.note)                                       
          XCTAssertTrue(coordinator.noteEditorViewMo
  del.hasUnsavedChanges)                            
                                                    
          // 2. ç¼–è¾‘ç¬”è®°                            
          coordinator.noteEditorViewModel.updateTitl
  e("æµ‹è¯•ç¬”è®°")                                     
          coordinator.noteEditorViewModel.updateCont
  ent(NSAttributedString(string: "æµ‹è¯•å†…å®¹"))       
                                                    
          // 3. ä¿å­˜ç¬”è®°                            
          await                                     
  coordinator.noteEditorViewModel.saveNote()        
                                                    
          XCTAssertFalse(coordinator.noteEditorViewM
  odel.hasUnsavedChanges)                           
                                                    
          // 4. éªŒè¯ç¬”è®°å‡ºç°åœ¨åˆ—è¡¨ä¸­                
          await                                     
  coordinator.noteListViewModel.loadNotes()         
                                                    
          XCTAssertFalse(coordinator.noteListViewMod
  el.notes.isEmpty)                                 
          XCTAssertEqual(coordinator.noteListViewMod
  el.notes.first?.title, "æµ‹è¯•ç¬”è®°")                
      }                                             
                                                    
      func testSyncFlow() async throws {            
          // 1. åˆ›å»ºæœ¬åœ°ç¬”è®°                        
                                                    
  coordinator.noteEditorViewModel.createNewNote()   
          coordinator.noteEditorViewModel.updateTitl
  e("å¾…åŒæ­¥ç¬”è®°")                                   
          await                                     
  coordinator.noteEditorViewModel.saveNote()        
                                                    
          // 2. è§¦å‘åŒæ­¥                            
          try await                                 
  coordinator.syncCoordinator.startSync()           
                                                    
          // 3. ç­‰å¾…åŒæ­¥å®Œæˆ                        
          try await Task.sleep(nanoseconds:         
  1_000_000_000)                                    
                                                    
          // 4. éªŒè¯åŒæ­¥çŠ¶æ€                        
          XCTAssertFalse(coordinator.syncCoordinator
  .isSyncing)                                       
          XCTAssertNotNil(coordinator.syncCoordinato
  r.lastSyncTime)                                   
      }                                             
                                                    
      private func setupTestServices() {            
          // æ³¨å†Œæµ‹è¯•æœåŠ¡                           
          let testDB = try! DatabaseConnection(path:
   ":memory:")                                      
          let noteStorage =                         
  NoteDatabaseService(connection: testDB)           
                                                    
                                                    
  container.register(NoteStorageProtocol.self,      
  instance: noteStorage)                            
                                                    
  container.register(SyncServiceProtocol.self,      
  instance: MockSyncService())                      
          container.register(AuthenticationServicePr
  otocol.self, instance: MockAuthService())         
      }                                             
  }                                                 
                                                    
  7.3.3 æ€§èƒ½æµ‹è¯•                                    
                                                    
  æ–‡ä»¶ï¼š Tests/Performance/PerformanceTests.swift   
                                                    
  import XCTest                                     
  @testable import MiNoteMac                        
                                                    
  final class PerformanceTests: XCTestCase {        
      func testNoteListLoadingPerformance() {       
          let storage =                             
  createStorageWithNotes(count: 1000)               
          let viewModel = NoteListViewModel(        
              noteStorage: storage,                 
              syncService: MockSyncService()        
          )                                         
                                                    
          measure {                                 
              Task {                                
                  await viewModel.loadNotes()       
              }                                     
          }                                         
                                                    
          // åº”è¯¥åœ¨ 100ms å†…å®Œæˆ                    
      }                                             
                                                    
      func testSearchPerformance() {                
          let storage =                             
  createStorageWithNotes(count: 10000)              
                                                    
          measure {                                 
              _ = try? storage.searchNotes(query:   
  "test")                                           
          }                                         
                                                    
          // åº”è¯¥åœ¨ 50ms å†…å®Œæˆ                     
      }                                             
                                                    
      func testMemoryUsage() {                      
          let storage =                             
  createStorageWithNotes(count: 5000)               
          let viewModel = NoteListViewModel(        
              noteStorage: storage,                 
              syncService: MockSyncService()        
          )                                         
                                                    
          measureMemory {                           
              Task {                                
                  await viewModel.loadNotes()       
              }                                     
          }                                         
                                                    
          // å†…å­˜ä½¿ç”¨åº”è¯¥å°äº 100MB                 
      }                                             
                                                    
      private func createStorageWithNotes(count:    
  Int) -> NoteStorageProtocol {                     
          let storage = MockNoteStorage()           
          storage.mockNotes = (0..<count).map { i
          Note(                                 
                  id: "\(i)",                       
                  title: "Note \(i)",               
                  content: "Content \(i)",          
                  createDate: Date(),               
                  editDate: Date()                  
              )                                     
          }                                         
          return storage                            
      }                                             
  }                                                 
                                                    
  7.3.4 æµ‹è¯•è‡ªåŠ¨åŒ–                                  
                                                    
  åˆ›å»ºæµ‹è¯•è„šæœ¬                                      
                                                    
  æ–‡ä»¶ï¼š scripts/run_tests.sh                       
                                                    
  #!/bin/bash                                       
                                                    
  echo "ğŸ§ª è¿è¡Œå•å…ƒæµ‹è¯•..."                         
  xcodebuild test \                                 
      -scheme MiNoteMac \                           
      -destination 'platform=macOS' \               
      -only-testing:MiNoteMacTests/UnitTests \      
      | xcpretty                                    
                                                    
  echo "ğŸ”— è¿è¡Œé›†æˆæµ‹è¯•..."                         
  xcodebuild test \                                 
      -scheme MiNoteMac \                           
      -destination 'platform=macOS' \               
      -only-testing:MiNoteMacTests/IntegrationTests 
  \                                                 
      | xcpretty                                    
                                                    
  echo "âš¡ è¿è¡Œæ€§èƒ½æµ‹è¯•..."                         
  xcodebuild test \                                 
      -scheme MiNoteMac \                           
      -destination 'platform=macOS' \               
      -only-testing:MiNoteMacTests/PerformanceTests 
  \                                                 
      | xcpretty                                    
                                                    
  echo "âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆ"                            
                                                    
  7.4 æŒç»­é›†æˆ                                      
                                                    
  æ–‡ä»¶ï¼š .github/workflows/ci.yml                   
                                                    
  name: CI                                          
                                                    
  on:                                               
    push:                                           
      branches: [ develop, main ]                   
    pull_request:                                   
      branches: [ develop, main ]                   
                                                    
  jobs:                                             
    test:                                           
      runs-on: macos-latest                         
                                                    
      steps:                                        
      - uses: actions/checkout@v3                   
                                                    
      - name: è®¾ç½® Xcode                            
        uses: maxim-lobanov/setup-xcode@v1          
        with:                                       
          xcode-version: latest-stable              
                                                    
      - name: å®‰è£…ä¾èµ–                              
        run: |                                      
          brew install xcpretty                     
                                                    
      - name: è¿è¡Œå•å…ƒæµ‹è¯•                          
        run: |                                      
          xcodebuild test \                         
            -scheme MiNoteMac \                     
            -destination 'platform=macOS' \         
            -only-testing:MiNoteMacTests/UnitTests \
            | xcpretty                              
                                                    
      - name: è¿è¡Œé›†æˆæµ‹è¯•                          
        run: |                                      
          xcodebuild test \                         
            -scheme MiNoteMac \                     
            -destination 'platform=macOS' \         
                                                    
  -only-testing:MiNoteMacTests/IntegrationTests \   
            | xcpretty                              
                                                    
      - name: ä»£ç è¦†ç›–ç‡                            
        run: |                                      
          xcodebuild test \                         
            -scheme MiNoteMac \                     
            -destination 'platform=macOS' \         
            -enableCodeCoverage YES \               
            | xcpretty                              
                                                    
      - name: ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š                        
        uses: codecov/codecov-action@v3             
                                                    
  ---                                               
  8. æˆåŠŸæŒ‡æ ‡                                       
                                                    
  8.1 ä»£ç è´¨é‡æŒ‡æ ‡                                  
  æŒ‡æ ‡: æœ€å¤§æ–‡ä»¶è¡Œæ•°                                
  å½“å‰å€¼: 4,530                                     
  ç›®æ ‡å€¼: < 500                                     
  æµ‹é‡æ–¹æ³•: ä»£ç æ‰«æ                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: å•ä¾‹æ•°é‡                                    
  å½“å‰å€¼: 45+                                       
  ç›®æ ‡å€¼: < 5                                       
  æµ‹é‡æ–¹æ³•: ä»£ç æ‰«æ                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: æµ‹è¯•è¦†ç›–ç‡                                  
  å½“å‰å€¼: < 30%                                     
  ç›®æ ‡å€¼: > 80%                                     
  æµ‹é‡æ–¹æ³•: Xcode Coverage                          
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: å¾ªç¯ä¾èµ–æ•°                                  
  å½“å‰å€¼: 10+                                       
  ç›®æ ‡å€¼: 0                                         
  æµ‹é‡æ–¹æ³•: ä¾èµ–åˆ†æå·¥å…·                            
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: ä»£ç é‡å¤ç‡                                  
  å½“å‰å€¼: æœªçŸ¥                                      
  ç›®æ ‡å€¼: < 5%                                      
  æµ‹é‡æ–¹æ³•: SonarQube                               
  8.2 æ€§èƒ½æŒ‡æ ‡                                      
  æŒ‡æ ‡: åº”ç”¨å¯åŠ¨æ—¶é—´                                
  å½“å‰å€¼: æœªæµ‹é‡                                    
  ç›®æ ‡å€¼: < 2s                                      
  æµ‹é‡æ–¹æ³•: æ€§èƒ½æµ‹è¯•                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: ç¬”è®°åˆ—è¡¨åŠ è½½æ—¶é—´ï¼ˆ1000æ¡ï¼‰                  
  å½“å‰å€¼: æœªæµ‹é‡                                    
  ç›®æ ‡å€¼: < 100ms                                   
  æµ‹é‡æ–¹æ³•: æ€§èƒ½æµ‹è¯•                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: æœç´¢å“åº”æ—¶é—´ï¼ˆ10000æ¡ï¼‰                     
  å½“å‰å€¼: æœªæµ‹é‡                                    
  ç›®æ ‡å€¼: < 50ms                                    
  æµ‹é‡æ–¹æ³•: æ€§èƒ½æµ‹è¯•                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: å†…å­˜ä½¿ç”¨ï¼ˆ5000æ¡ç¬”è®°ï¼‰                      
  å½“å‰å€¼: æœªæµ‹é‡                                    
  ç›®æ ‡å€¼: < 100MB                                   
  æµ‹é‡æ–¹æ³•: Instruments                             
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: SwiftUI é‡æ¸²æŸ“æ¬¡æ•°                          
  å½“å‰å€¼: æœªæµ‹é‡                                    
  ç›®æ ‡å€¼: å‡å°‘ 50%                                  
  æµ‹é‡æ–¹æ³•: SwiftUI Profiler                        
  8.3 å¼€å‘æ•ˆç‡æŒ‡æ ‡                                  
  æŒ‡æ ‡: æ–°åŠŸèƒ½å¼€å‘æ—¶é—´                              
  å½“å‰å€¼: åŸºå‡†                                      
  ç›®æ ‡å€¼: å‡å°‘ 30%                                  
  æµ‹é‡æ–¹æ³•: æ—¶é—´è·Ÿè¸ª                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: Bug ä¿®å¤æ—¶é—´                                
  å½“å‰å€¼: åŸºå‡†                                      
  ç›®æ ‡å€¼: å‡å°‘ 40%                                  
  æµ‹é‡æ–¹æ³•: Issue è·Ÿè¸ª                              
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: ä»£ç å®¡æŸ¥æ—¶é—´                                
  å½“å‰å€¼: åŸºå‡†                                      
  ç›®æ ‡å€¼: å‡å°‘ 50%                                  
  æµ‹é‡æ–¹æ³•: PR ç»Ÿè®¡                                 
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: æ–°äººä¸Šæ‰‹æ—¶é—´                                
  å½“å‰å€¼: 2-3 å‘¨                                    
  ç›®æ ‡å€¼: < 1 å‘¨                                    
  æµ‹é‡æ–¹æ³•: åŸ¹è®­è®°å½•                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          
  æŒ‡æ ‡: åˆå¹¶å†²çªé¢‘ç‡                                
  å½“å‰å€¼: é«˜                                        
  ç›®æ ‡å€¼: ä½                                        
  æµ‹é‡æ–¹æ³•: Git ç»Ÿè®¡                                
  8.4 æ¶æ„å¥åº·åº¦æŒ‡æ ‡                                
                                                    
  æ¯æœˆè¯„ä¼°ä¸€æ¬¡ï¼š                                    
                                                    
  - æ¨¡å—åŒ–ç¨‹åº¦ - ç»„ä»¶æ˜¯å¦ç‹¬ç«‹ã€å¯æ›¿æ¢               
  - å¯æµ‹è¯•æ€§ - æ–°ä»£ç æ˜¯å¦éƒ½æœ‰æµ‹è¯•                   
  - æ–‡æ¡£å®Œæ•´æ€§ - æ¶æ„å†³ç­–æ˜¯å¦æœ‰æ–‡æ¡£                 
  - æŠ€æœ¯å€ºåŠ¡ - TODO/FIXME æ•°é‡æ˜¯å¦å¯æ§              
  - ä¾èµ–å¥åº· - æ˜¯å¦æœ‰å¾ªç¯ä¾èµ–ã€è¿‡åº¦è€¦åˆ             
                                                    
  8.5 é˜¶æ®µæ€§é‡Œç¨‹ç¢‘                                  
                                                    
  é˜¶æ®µ 1 å®Œæˆæ ‡å¿—ï¼ˆç¬¬ 3 å‘¨ï¼‰                        
                                                    
  - âœ… DIContainer å®ç°å¹¶æµ‹è¯•é€šè¿‡                   
  - âœ… 5+ æ ¸å¿ƒæœåŠ¡åè®®åˆ›å»º                          
  - âœ… æµ‹è¯•åŸºç¡€è®¾æ–½æ­å»ºå®Œæˆ                         
  - âœ… å›¢é˜ŸåŸ¹è®­å®Œæˆ                                 
                                                    
  é˜¶æ®µ 2 å®Œæˆæ ‡å¿—ï¼ˆç¬¬ 9 å‘¨ï¼‰                        
                                                    
  - âœ… NotesViewModel æ‹†åˆ†ä¸º 7 ä¸ª ViewModel         
  - âœ… AppCoordinator å®ç°å®Œæˆ                      
  - âœ… 50%+ è§†å›¾è¿ç§»åˆ°æ–°æ¶æ„                        
  - âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 60%                         
                                                    
  é˜¶æ®µ 3 å®Œæˆæ ‡å¿—ï¼ˆç¬¬ 13 å‘¨ï¼‰                       
                                                    
  - âœ… ä¸»è¦æœåŠ¡éƒ½æœ‰åè®®æŠ½è±¡                         
  - âœ… å¤§å‹æœåŠ¡æ–‡ä»¶æ‹†åˆ†å®Œæˆ                         
  - âœ… 50%+ å•ä¾‹è¿ç§»åˆ° DI                           
  - âœ… æœåŠ¡å±‚æµ‹è¯•è¦†ç›–ç‡ > 70%                       
                                                    
  é˜¶æ®µ 4 å®Œæˆæ ‡å¿—ï¼ˆç¬¬ 16 å‘¨ï¼‰                       
                                                    
  - âœ… æ•°æ®åº“æ“ä½œå¼‚æ­¥åŒ–                             
  - âœ… åˆ†é¡µåŠ è½½å®ç°                                 
  - âœ… æ€§èƒ½æå‡ 20%+                                
  - âœ… å†…å­˜ä½¿ç”¨ä¼˜åŒ– 30%+                            
                                                    
  ---                                               
  9. é™„å½•                                           
                                                    
  9.1 å‚è€ƒèµ„æº                                      
                                                    
  æ¶æ„æ¨¡å¼                                          
                                                    
  - https://blog.cleancoder.com/uncle-bob/2012/08/13
  /the-clean-architecture.html - Robert C. Martin   
  - https://docs.microsoft.com/en-us/xamarin/xamarin
  -forms/enterprise-application-patterns/mvvm       
  - https://martinfowler.com/articles/injection.html
   - Martin Fowler                                  
                                                    
  Swift æœ€ä½³å®è·µ                                    
                                                    
  - https://swift.org/documentation/api-design-guide
  lines/                                            
  - https://www.effectiveswift.com/                 
  - https://www.swiftbysundell.com/                 
                                                    
  æµ‹è¯•                                              
                                                    
  - https://martinfowler.com/bliki/TestDrivenDevelop
  ment.html                                         
  - https://developer.apple.com/documentation/xctest
                                                    
  æ€§èƒ½ä¼˜åŒ–                                          
                                                    
  - https://help.apple.com/instruments/mac/         
  - https://www.hackingwithswift.com/quick-start/swi
  ftui/swiftui-tips-and-tricks                      
                                                    
  9.2 å·¥å…·æ¨è                                      
                                                    
  ä»£ç è´¨é‡                                          
                                                    
  - SwiftLint - Swift ä»£ç é£æ ¼æ£€æŸ¥                  
  - SonarQube - ä»£ç è´¨é‡åˆ†æ                        
  - Periphery - æœªä½¿ç”¨ä»£ç æ£€æµ‹                      
                                                    
  ä¾èµ–åˆ†æ                                          
                                                    
  - swift-dependency-analyzer - ä¾èµ–å…³ç³»åˆ†æ        
  - Graphviz - ä¾èµ–å›¾å¯è§†åŒ–                         
                                                    
  æ€§èƒ½åˆ†æ                                          
                                                    
  - Instruments - Xcode æ€§èƒ½åˆ†æå·¥å…·                
  - SwiftUI Profiler - SwiftUI æ€§èƒ½åˆ†æ             
                                                    
  æµ‹è¯•                                              
                                                    
  - Quick/Nimble - BDD æµ‹è¯•æ¡†æ¶                     
  - Mockingbird - Mock ç”Ÿæˆå·¥å…·                     
                                                    
  9.3 å›¢é˜Ÿåä½œ                                      
                                                    
  ä»£ç å®¡æŸ¥æ¸…å•                                      
                                                    
  æ¶æ„å±‚é¢ï¼š                                        
  - æ˜¯å¦éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Ÿ                          
  - æ˜¯å¦ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Ÿ                              
  - æ˜¯å¦æœ‰åè®®æŠ½è±¡ï¼Ÿ                                
  - æ˜¯å¦æœ‰å¾ªç¯ä¾èµ–ï¼Ÿ                                
                                                    
  ä»£ç è´¨é‡ï¼š                                        
  - æ–‡ä»¶æ˜¯å¦å°äº 500 è¡Œï¼Ÿ                           
  - å‡½æ•°æ˜¯å¦å°äº 50 è¡Œï¼Ÿ                            
  - å‘½åæ˜¯å¦æ¸…æ™°ï¼Ÿ                                  
  - æ˜¯å¦æœ‰è¶³å¤Ÿçš„æ³¨é‡Šï¼Ÿ                              
                                                    
  æµ‹è¯•ï¼š                                            
  - æ˜¯å¦æœ‰å•å…ƒæµ‹è¯•ï¼Ÿ                                
  - æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ï¼Ÿ                            
  - æ˜¯å¦æµ‹è¯•äº†è¾¹ç•Œæƒ…å†µï¼Ÿ                            
  - æ˜¯å¦æµ‹è¯•äº†é”™è¯¯å¤„ç†ï¼Ÿ                            
                                                    
  æ€§èƒ½ï¼š                                            
  - æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ                                
  - æ˜¯å¦æœ‰å†…å­˜æ³„æ¼ï¼Ÿ                                
  - æ˜¯å¦æœ‰ä¸å¿…è¦çš„ä¸»çº¿ç¨‹æ“ä½œï¼Ÿ                      
                                                    
  æ¯å‘¨ä¾‹ä¼šè®®ç¨‹                                      
                                                    
  1. è¿›åº¦å›é¡¾ï¼ˆ15 åˆ†é’Ÿï¼‰                            
    - æœ¬å‘¨å®Œæˆçš„ä»»åŠ¡                                
    - é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ                          
    - ä¸‹å‘¨è®¡åˆ’                                      
  2. æŠ€æœ¯åˆ†äº«ï¼ˆ20 åˆ†é’Ÿï¼‰                            
    - æ–°å­¦åˆ°çš„æŠ€æœ¯                                  
    - é‡æ„ä¸­çš„æœ€ä½³å®è·µ                              
    - è¸©è¿‡çš„å‘                                      
  3. ä»£ç å®¡æŸ¥ï¼ˆ20 åˆ†é’Ÿï¼‰                            
    - é‡ç‚¹ PR è®¨è®º                                  
    - æ¶æ„å†³ç­–è®¨è®º                                  
  4. é£é™©è¯„ä¼°ï¼ˆ5 åˆ†é’Ÿï¼‰                             
    - å½“å‰é£é™©                                      
    - ç¼“è§£æªæ–½                                      
                                                    
  9.4 å¸¸è§é—®é¢˜ FAQ                                  
                                                    
  Q1: é‡æ„æœŸé—´å¦‚ä½•å¤„ç†ç´§æ€¥ bugï¼Ÿ                    
                                                    
  A:                                                
  1. åœ¨æ—§ä»£ç ä¸­å¿«é€Ÿä¿®å¤ bug                         
  2. å‘å¸ƒä¿®å¤ç‰ˆæœ¬                                   
  3. åœ¨æ–°æ¶æ„ä¸­åŒæ­¥ä¿®å¤                             
  4. æ·»åŠ æµ‹è¯•é˜²æ­¢å›å½’                               
                                                    
  Q2: å¦‚æœé‡æ„è¿›åº¦è½åæ€ä¹ˆåŠï¼Ÿ                      
                                                    
  A:                                                
  1. è¯„ä¼°æ˜¯å¦å¯ä»¥ç¼©å°èŒƒå›´                           
  2. è€ƒè™‘å»¶é•¿æŸä¸ªé˜¶æ®µçš„æ—¶é—´                         
  3. å¢åŠ äººåŠ›èµ„æº                                   
  4. è°ƒæ•´ä¼˜å…ˆçº§ï¼Œå…ˆå®Œæˆæ ¸å¿ƒéƒ¨åˆ†                     
                                                    
  Q3: æ–°æ—§ä»£ç å¦‚ä½•å…±å­˜ï¼Ÿ                            
                                                    
  A:                                                
  1. ä½¿ç”¨ Feature Flag æ§åˆ¶                         
  2. ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿‡æ¸¡                             
  3. ä¿æŒæ¥å£å…¼å®¹                                   
  4. é€æ­¥è¿ç§»ï¼Œä¸è¦ä¸€æ¬¡æ€§æ›¿æ¢                       
                                                    
  Q4: å¦‚ä½•è¯´æœå›¢é˜Ÿè¿›è¡Œé‡æ„ï¼Ÿ                        
                                                    
  A:                                                
  1. å±•ç¤ºå½“å‰æ¶æ„çš„é—®é¢˜å’Œé£é™©                       
  2. è¯´æ˜é‡æ„çš„é•¿æœŸæ”¶ç›Š                             
  3. æä¾›è¯¦ç»†çš„è®¡åˆ’å’Œæ—¶é—´è¡¨                         
  4. ä»å°èŒƒå›´å¼€å§‹ï¼Œå±•ç¤ºæˆæœ                         
                                                    
  Q5: é‡æ„ä¼šå½±å“æ–°åŠŸèƒ½å¼€å‘å—ï¼Ÿ                      
                                                    
  A:                                                
  1. çŸ­æœŸä¼šæœ‰ä¸€å®šå½±å“ï¼ˆ10-20%ï¼‰                     
  2. é•¿æœŸä¼šå¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼ˆ30-50%ï¼‰               
  3. å¯ä»¥å¹¶è¡Œè¿›è¡Œï¼šæ–°åŠŸèƒ½ç”¨æ–°æ¶æ„ï¼Œæ—§åŠŸèƒ½é€æ­¥è¿ç§»   
  4. é‡æ„æœ¬èº«ä¹Ÿæ˜¯å­¦ä¹ å’Œæå‡çš„è¿‡ç¨‹                   
                                                    
  Q6: å¦‚ä½•ä¿è¯é‡æ„è´¨é‡ï¼Ÿ                            
                                                    
  A:                                                
  1. æµ‹è¯•å…ˆè¡Œï¼Œæ¯æ¬¡é‡æ„éƒ½æœ‰æµ‹è¯•ä¿æŠ¤                 
  2. ä»£ç å®¡æŸ¥ï¼Œè‡³å°‘ä¸¤äººå®¡æŸ¥æ¯ä¸ª PR                  
  3. æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œç¡®ä¿æ€§èƒ½ä¸ä¸‹é™                   
  4. åˆ†é˜¶æ®µè¿›è¡Œï¼Œæ¯ä¸ªé˜¶æ®µéƒ½å¯ä»¥ç‹¬ç«‹éªŒæ”¶             
                                                    
  ---                                               
  10. æ€»ç»“                                          
                                                    
  10.1 é‡æ„çš„å¿…è¦æ€§                                 
                                                    
  MiNote macOS é¡¹ç›®åœ¨ä¸€ä¸ªæœˆå†…å¿«é€Ÿå‘å±•åˆ° 11          
  ä¸‡è¡Œä»£ç ï¼ŒåŠŸèƒ½åŸºæœ¬é½å…¨ï¼Œè¿™æ˜¯ä¸€ä¸ªäº†ä¸èµ·çš„æˆå°±ã€‚ä½†æ˜¯
  ï¼Œå¿«é€Ÿå‘å±•ä¹Ÿå¸¦æ¥äº†æŠ€æœ¯å€ºåŠ¡ï¼š                      
                                                    
  - 4,530 è¡Œçš„ NotesViewModel - æˆä¸ºå¼€å‘ç“¶é¢ˆ        
  - 45+ ä¸ªå•ä¾‹ - å¯¼è‡´æµ‹è¯•å›°éš¾                       
  - ç¢ç‰‡åŒ–çš„çŠ¶æ€ç®¡ç† - å¼•å‘åŒæ­¥é—®é¢˜                 
  - ç¼ºä¹æ¶æ„è§„èŒƒ - å½±å“å›¢é˜Ÿåä½œ                     
                                                    
  å¦‚æœä¸è¿›è¡Œé‡æ„ï¼Œè¿™äº›é—®é¢˜ä¼šåœ¨ 6-12                 
  ä¸ªæœˆå†…è®©é¡¹ç›®å˜å¾—æ— æ³•ç»´æŠ¤ã€‚                        
                                                    
  10.2 é‡æ„çš„ä»·å€¼                                   
                                                    
  é€šè¿‡ç³»ç»Ÿæ€§çš„æ¶æ„é‡æ„ï¼Œå¯ä»¥è·å¾—ï¼š                  
                                                    
  çŸ­æœŸæ”¶ç›Šï¼ˆ3-6 ä¸ªæœˆï¼‰ï¼š                            
  - ä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤                              
  - æµ‹è¯•è¦†ç›–ç‡å¤§å¹…æå‡                              
  - Bug ä¿®å¤é€Ÿåº¦åŠ å¿«                                
  - å›¢é˜Ÿåä½œæ›´é¡ºç•…                                  
                                                    
  é•¿æœŸæ”¶ç›Šï¼ˆ6-18 ä¸ªæœˆï¼‰ï¼š                           
  - æ–°åŠŸèƒ½å¼€å‘é€Ÿåº¦æå‡ 30-50%                       
  - æŠ€æœ¯å€ºåŠ¡å¯æ§                                    
  - å›¢é˜Ÿå¯ä»¥æ‰©å±•                                    
  - ä»£ç è´¨é‡æŒç»­æå‡                                
                                                    
  10.3 å…³é”®æˆåŠŸå› ç´                                  
                                                    
  1. æ¸è¿›å¼é‡æ„ - ä¸åœæ­¢ä¸šåŠ¡å¼€å‘                    
  2. æµ‹è¯•ä¿æŠ¤ - æ¯æ¬¡é‡æ„éƒ½æœ‰æµ‹è¯•                    
  3. å›¢é˜Ÿå…±è¯† - æ‰€æœ‰äººç†è§£å¹¶æ”¯æŒé‡æ„                
  4. æŒç»­æ”¹è¿› - é‡æ„æ˜¯æŒç»­çš„è¿‡ç¨‹ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§é¡¹ç›®    
                                                    
  10.4 ä¸‹ä¸€æ­¥è¡ŒåŠ¨                                   
                                                    
  ç«‹å³å¼€å§‹ï¼ˆæœ¬å‘¨ï¼‰ï¼š                                
  1. å›¢é˜Ÿè®¨è®ºå¹¶è¾¾æˆå…±è¯†                             
  2. åˆ›å»ºé‡æ„åˆ†æ”¯                                   
  3. å¼€å§‹é˜¶æ®µ 1ï¼šå»ºç«‹åŸºç¡€è®¾æ–½                       
                                                    
  ç¬¬ä¸€ä¸ªæœˆï¼š                                        
  1. å®Œæˆé˜¶æ®µ 1                                     
  2. å¼€å§‹é˜¶æ®µ 2                                     
  3. å»ºç«‹æµ‹è¯•æ–‡åŒ–                                   
                                                    
  ç¬¬äºŒ-ä¸‰ä¸ªæœˆï¼š                                     
  1. å®Œæˆé˜¶æ®µ 2                                     
  2. å¼€å§‹é˜¶æ®µ 3                                     
  3. æŒç»­ä¼˜åŒ–                                       
                                                    
  ç¬¬å››ä¸ªæœˆï¼š                                        
  1. å®Œæˆé˜¶æ®µ 3 å’Œ 4                                
  2. å…¨é¢æµ‹è¯•                                       
  3. å‘å¸ƒé‡æ„ç‰ˆæœ¬                                   
                                                    
  ---                                               
  é™„å½•ï¼šå¿«é€Ÿå‚è€ƒ                                    
                                                    
  é‡æ„æ£€æŸ¥æ¸…å•                                      
                                                    
  æ¯å¤©ï¼š                                            
  - æäº¤ä»£ç å‰è¿è¡Œæµ‹è¯•                              
  - ä»£ç å®¡æŸ¥                                        
  - æ›´æ–°æ–‡æ¡£                                        
                                                    
  æ¯å‘¨ï¼š                                            
  - å›¢é˜Ÿä¾‹ä¼š                                        
  - è¿›åº¦è¯„ä¼°                                        
  - é£é™©æ£€æŸ¥                                        
                                                    
  æ¯ä¸ªé˜¶æ®µï¼š                                        
  - å®ŒæˆéªŒæ”¶æ ‡å‡†                                    
  - æ€§èƒ½æµ‹è¯•                                        
  - ä»£ç è¦†ç›–ç‡æ£€æŸ¥                                  
  - æ–‡æ¡£æ›´æ–°                                        
                                                    
  è”ç³»æ–¹å¼                                          
                                                    
  æŠ€æœ¯é—®é¢˜ï¼š åœ¨é¡¹ç›® Issue ä¸­è®¨è®º                    
  æ¶æ„å†³ç­–ï¼š å›¢é˜Ÿä¾‹ä¼šè®¨è®º                           
  ç´§æ€¥é—®é¢˜ï¼š è”ç³»æŠ€æœ¯è´Ÿè´£äºº                         
                                                    
  ---                                               
  æ–‡æ¡£ç‰ˆæœ¬ï¼š 1.0                                    
  æœ€åæ›´æ–°ï¼š 2026-01-22                             
  ç»´æŠ¤è€…ï¼š MiNote å¼€å‘å›¢é˜Ÿ                          
                                                    
  ---                                               
  ç¥é‡æ„é¡ºåˆ©ï¼ğŸš€                                    
                                                    
  ---                                               
                                                    
  è¿™å°±æ˜¯å®Œæ•´çš„é‡æ„æŒ‡å¯¼æ–‡æ¡£ï¼æ–‡æ¡£åŒ…å«äº†ï¼š            
                                                    
  1. âœ… **å½“å‰é—®é¢˜åˆ†æ** - è¯¦ç»†åˆ—å‡ºäº†æ‰€æœ‰æ¶æ„é—®é¢˜   
  2. âœ… **4 ä¸ªé‡æ„é˜¶æ®µ** -                          
  æ¯ä¸ªé˜¶æ®µéƒ½æœ‰è¯¦ç»†çš„æ­¥éª¤å’Œä»£ç ç¤ºä¾‹                  
  3. âœ… **é£é™©ç®¡ç†** - å›æ»šç­–ç•¥ã€æµ‹è¯•ç­–ç•¥ã€Feature  
  Flag                                              
  4. âœ… **æˆåŠŸæŒ‡æ ‡** - å¯é‡åŒ–çš„ç›®æ ‡å’ŒéªŒæ”¶æ ‡å‡†       
  5. âœ… **å®ç”¨å·¥å…·** - ä»£ç ç¤ºä¾‹ã€è„šæœ¬ã€CI é…ç½®      
  6. âœ… **å›¢é˜Ÿåä½œ** - ä»£ç å®¡æŸ¥æ¸…å•ã€ä¾‹ä¼šè®®ç¨‹ã€FAQ 