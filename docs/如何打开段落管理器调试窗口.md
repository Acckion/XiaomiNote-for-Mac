# 如何打开段落管理器调试窗口

## 方法 1: 通过菜单栏（推荐）

1. 启动应用程序（Debug 模式）
2. 点击菜单栏中的 **窗口** 菜单
3. 找到 **调试工具** 子菜单
4. 点击 **段落管理器调试**

> 注意：调试工具菜单只在 Debug 构建中可见，Release 构建中不会显示。

## 方法 2: 使用 Xcode Preview（开发时）

1. 在 Xcode 中打开 `Sources/View/NativeEditor/Debug/ParagraphManagerDebugView.swift`
2. 点击编辑器右上角的 "Resume" 按钮（或按 `Cmd+Option+P`）
3. 调试界面将在 Xcode 的 Canvas 中显示

## 调试窗口功能

### 左侧：文本编辑区
- **文本输入框**：输入或修改文本内容
- **更新段落列表**：手动刷新段落分析结果
- **清空文本**：清除所有文本
- **示例文本**：加载预设的示例文本

### 格式应用区
- **格式类型选择器**：选择要应用的段落格式
  - 标题段落
  - H1-H3 标题
  - 普通段落
  - 无序/有序列表
  - 引用
  - 代码块
- **应用到选中段落**：将选中的格式应用到当前选中的段落

### 右侧：段落列表
显示所有检测到的段落信息：
- **段落索引**：段落在文档中的位置
- **段落类型**：当前段落的格式类型（带颜色标识）
- **范围**：段落在文本中的起始位置和长度
- **版本号**：段落的版本号（用于增量更新）
- **重新解析标记**：是否需要重新解析

### 统计信息
- 总段落数
- 标题段落数量
- 普通段落数量
- 列表段落数量

## 使用场景

1. **验证段落边界检测**：输入不同的文本，查看段落是否正确分割
2. **测试格式应用**：选择段落并应用不同格式，验证格式是否正确应用
3. **调试段落管理器**：观察段落版本号和重新解析标记的变化
4. **性能测试**：输入大量文本，观察段落管理器的性能表现

## 技术细节

- **段落管理器**：`ParagraphManager` 类负责段落的检测、维护和格式应用
- **数据模型**：`Paragraph` 模型包含段落的类型、范围、属性和版本信息
- **属性分层**：`AttributeLayer` 协议定义了三层属性系统（Meta、Layout、Decorative）

## 相关文件

- 调试视图：`Sources/View/NativeEditor/Debug/ParagraphManagerDebugView.swift`
- 窗口控制器：`Sources/Window/Controllers/ParagraphDebugWindowController.swift`
- 段落管理器：`Sources/View/NativeEditor/Manager/ParagraphManager.swift`
- 数据模型：`Sources/View/NativeEditor/Model/Paragraph.swift`
- 详细文档：`docs/PARAGRAPH_MANAGER_DEMO.md`

## 下一步

调试窗口目前是独立的工具，还没有集成到实际的编辑器中。要将段落管理器集成到 `NativeEditorView`，需要：

1. 在 `NativeEditorView` 中初始化 `ParagraphManager`
2. 连接文本变化事件到段落管理器
3. 连接格式应用事件到段落管理器
4. 更新格式菜单状态

详见任务列表：`.kiro/specs/69-paper-inspired-editor-refactor/tasks.md`
